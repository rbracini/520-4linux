define(["translations","pgadmin.browser.endpoints","pgadmin.browser.utils","pgadmin.browser.messages"],function(r,a,n,i){return function(l){function e(e){var t=e[0];var r=e[1];var a=e[2];var n,i,s=0,o=[];for(;s<t.length;s++){i=t[s];if(Object.prototype.hasOwnProperty.call(d,i)&&d[i]){o.push(d[i][0])}d[i]=0}for(n in r){if(Object.prototype.hasOwnProperty.call(r,n)){l[n]=r[n]}}if(f)f(e);while(o.length){o.shift()()}c.push.apply(c,a||[]);return u()}function u(){var e;for(var t=0;t<c.length;t++){var r=c[t];var a=true;for(var n=1;n<r.length;n++){var i=r[n];if(d[i]!==0)a=false}if(a){c.splice(t--,1);e=s(s.s=r[0])}}return e}var r={};var d={4:0,3:0};var c=[];function s(e){if(r[e]){return r[e].exports}var t=r[e]={i:e,l:false,exports:{}};l[e].call(t.exports,t,t.exports,s);t.l=true;return t.exports}s.m=l;s.c=r;s.d=function(e,t,r){if(!s.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:r})}};s.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};s.t=function(t,e){if(e&1)t=s(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);s.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r};s.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};s.d(e,"a",e);return e};s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};s.p="";var t=window["webpackJsonp"]=window["webpackJsonp"]||[];var a=t.push.bind(t);t.push=e;t=t.slice();for(var n=0;n<t.length;n++)e(t[n]);var f=a;c.push([102,1,0]);return u()}([,,function(e,t,r){"use strict";var a,n;!(a=[r(41)],n=function(o){return function e(t,n){var r=o[t]?o[t]:t;var a=/([^%]*)%\(([^\)]+)\)s(.*)/;var i;var s=r;do{i=false;s=s.replace(a,function(e,t,r,a){i=true;return t+n[r]+a})}while(i);return s}}.apply(t,a),n!==undefined&&(e.exports=n))},function(a,n,e){"use strict";(function(e){var t,r;function y(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){y=function e(t){return typeof t}}else{y=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return y(e)}!(t=[],r=function(){var e=window.pgAdmin=window.pgAdmin||{};(function(e,t,d){"use strict";function c(e,t,r,a){r=r||"width";var n,i,s,o=(t.match(_)||[])[2],l="px"===o?1:h[o+"toPx"],u=/r?em/i;if(l||u.test(o)&&!a)e=l?e:"rem"===o?g:"fontSize"===r?e.parentNode||e:e,l=l||parseFloat(f(e,"fontSize")),s=parseFloat(t)*l;else{n=e.style,i=n[r];try{n[r]=t}catch(e){return 0}s=n[r]?parseFloat(f(e,r)):0,n[r]=i!==d?i:null}return s}function f(e,t){var r,a,n,i,s,o=/^top|bottom/,l=["paddingTop","paddingBottom","borderTop","borderBottom"],u=4;a=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)];r=b?b(e)[t]:a?a+"px":"fontSize"===t?c(e,"1em","left",1)+"px":e.currentStyle[t];n=(r.match(_)||[])[2];if("%"===n&&p){if(o.test(t)){for(i=(s=e.parentNode||e).offsetHeight;u--;){i-=parseFloat(f(s,l[u]))}r=parseFloat(r)/100*i+"px"}else r=c(e,r)}else("auto"===r||n&&"px"!==n)&&b?r=0:n&&"px"!==n&&!b&&(r=c(e,r)+"px");return r}var p,r=t.createElement("test"),g=t.documentElement,a=t.defaultView,b=a&&a.getComputedStyle,_=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,h={},n=[1/25.4,1/2.54,1/72,1/6],i=["mm","cm","pt","pc","in","mozmm"],s=6;for(g.appendChild(r),b&&(r.style.marginTop="1%",p="1%"===b(r).marginTop);s--;){h[i[s]+"toPx"]=n[s]?n[s]*h.inToPx:c(r,"1"+i[s])}g.removeChild(r),r=d,e.toPx=c})(e,window.document);e.natural_sort=function(e,t,r){r=r||{};var a=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,n=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,l=function e(t){return r.insensitive&&(""+t).toLowerCase()||""+t},u=l(e).replace(n,"")||"",d=l(t).replace(n,"")||"",c=u.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=parseInt(u.match(s))||c.length!==1&&u.match(i)&&Date.parse(u),g=parseInt(d.match(s))||p&&d.match(i)&&Date.parse(d)||null,b,_,h=r.desc?-1:1;if(g)if(p<g)return-1*h;else if(p>g)return 1*h;for(var v=0,m=Math.max(c.length,f.length);v<m;v++){b=!(c[v]||"").match(o)&&parseFloat(c[v])||c[v]||0;_=!(f[v]||"").match(o)&&parseFloat(f[v])||f[v]||0;if(isNaN(b)!==isNaN(_)){return(isNaN(b)?1:-1)*h}else if(y(b)!==y(_)){b+="";_+=""}if(b<_)return-1*h;if(b>_)return 1*h}return 0};return e}.apply(n,t),r!==undefined&&(a.exports=r))}).call(this,e(3))},function(e,t,r){"use strict";var a,n;!(a=[r(42)],n=function(s){return function e(t,n){var r=s[t];var a=/([<])([^:^>]*:)?([^>]+)([>])/g,i=r;if(!r)return r;i=i.replace(a,function(e,t,r,a){if(a in n){return n[a]}return e});return i}}.apply(t,a),n!==undefined&&(e.exports=n))},,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseShortcutValue=s;t.findAndSetFocus=o;t.getEpoch=c;t.getGCD=f;t.getMod=p;t.parseFuncParams=g;t.quote_ident=b;t.fully_qualify=_;t.getRandomInt=h;t.isString=t.isFunction=t.isValidData=void 0;var a=n(r(1));var i=r(20);function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var t="";if(e.alt){t+="alt+"}if(e.shift){t+="shift+"}if(e.control){t+="ctrl+"}t+=e.key.char.toLowerCase();return t}function o(t){if(t.length==0){return}setTimeout(function(){var e=t.find("button.fa-plus:first");if(e.length==0){e=t.find("\n          .pgadmin-controls:first input:enabled,\n          .pgadmin-controls:first .btn:not(.toggle),\n          .CodeMirror-scroll").find('*[tabindex]:not([tabindex="-1"])')}if(e.length>0){e[0].focus()}else{t[0].focus()}},200)}var l=function e(t){return!a.default.isUndefined(t)&&!a.default.isNull(t)};t.isValidData=l;var u=function e(t){return a.default.isFunction(t)};t.isFunction=u;var d=function e(t){return a.default.isString(t)};t.isString=d;function c(e){var t=e?e:new Date;return parseInt(t.getTime()/1e3)}function f(e){var t=function e(t,r){return t==0?r:e(r%t,t)};var r=e.length;if(r<=2){return t(e[0],e[1])}var a=e[0];for(var n=1;n<r;n++){a=t(e[n],a)}return a}function p(e,t){return(e%t+t)%t}function g(e){var t=[],r="",a="";if(e.endsWith("()")){r=e.substring(0,e.length-2)}else if(!e.endsWith(")")){r=e}else if(!e.endsWith("()")&&e.endsWith(")")){var n=0,i=e.length;n=e.length-2;while(n>=0){if(e[n]=="("){i=n;break}else if(e[n]=='"'){n--;while(e[n]!='"'){n--}}n--}r=e.substring(0,i);a=e.substring(i+1,e.length-1);var s=0,o="",l=["IN","OUT","INOUT","VARIADIC"];s=n=0;while(n<a.length){if(a[n]=='"'){n++;while(a[n]!='"'){n++}}else if(a[n]==" "){if(o==""||l.indexOf(o)>-1){o=a.substring(s,n);s=n+1}}else if(a[n]==","){t.push([o,a.substring(s,n)]);o="";s=n+1}n++}t.push([o,a.substring(s)])}return{func_name:r,param_string:a,params:t}}function b(e){var t=false;if(!isNaN(parseInt(e))){t=true}if(e.search(/[^a-z0-9_]/g)>-1){e=e.replace(/"/g,'""');t=true}if(t){return'"'.concat(e,'"')}else{return e}}function _(e,t,r){var a=i.getTreeNodeHierarchyFromIdentifier.call(e,r);var n="";if(a.schema!==undefined){n=b(a.schema._label)}else if(a.view!==undefined){n=b(a.view._label)}else if(a.catalog!==undefined){n=b(a.catalog._label)}if(a.package!==undefined&&t._type!="package"){if(n==""){n=b(a.package._label)}else{n+="."+b(a.package._label)}}if(n!=""){return n+"."+b(t._label)}else{return b(t._label)}}function h(e,t){e=Math.ceil(e);t=Math.floor(t);return Math.floor(Math.random()*(t-e+1))+e}},,,function(e,r,t){"use strict";(function(s){Object.defineProperty(r,"__esModule",{value:true});r.getTreeNodeHierarchyFromElement=e;r.getTreeNodeHierarchyFromIdentifier=t;r.getTreeNodeHierarchy=a;function e(e,t){return a.call(e,t)}function t(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e);var r=this.treeMenu.findNode(t);return a.call(this,r)}function a(e){var t=0;var r=0;var a={};do{var n=e.getData();if(n._type in this.Nodes&&this.Nodes[n._type].hasId){var i=o(n._type,r);if(a[i]===undefined){a[i]=s.extend({},n,{priority:t});t-=1}}r+=1;e=e.hasParent()?e.parent():null}while(e);return a}function o(e,t){return e==="partition"&&t>0?"table":e}}).call(this,t(1))},,function(t,r,i){var s,o;
/*
  Backform
  http://github.com/amiliaapp/backform

  Copyright (c) 2014 Amilia Inc.
  Written by Martin Drapeau
  Licensed under the MIT @license
 */
/*
  Backform
  http://github.com/amiliaapp/backform

  Copyright (c) 2014 Amilia Inc.
  Written by Martin Drapeau
  Licensed under the MIT @license
 */
(function(a,n){if(true){!(s=[i(1),i(0),i(9)],o=function(e,t,r){return n(a,e,t,r)}.apply(r,s),o!==undefined&&(t.exports=o))}else{var e}})(this,function(e,u,d,c){Backform=e.Backform={formClassName:"backform form-inline",groupClassName:"form-group row",controlLabelClassName:"col-sm-2 col-form-label",controlContainerClassName:"col-sm-10",controlsClassName:"col-sm-8",controlClassName:"form-control",controlFormInlineClassName:"form-inline",helpClassName:"form-text",errorClassName:"has-error",helpMessageClassName:"form-text text-muted",hiddenClassName:"d-none",requiredInputClassName:undefined,resolveNameToClass:function(e,t){if(u.isString(e)){var r=u.map(e.split("-"),function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("")+t;var a=Backform[r];if(u.isUndefined(a)){throw new ReferenceError("Class '"+r+"' not found")}return a}return e}};var t=Backform.Form=c.View.extend({fields:undefined,errorModel:undefined,tagName:"form",className:function(){return Backform.formClassName},initialize:function(e){if(!(e.fields instanceof c.Collection))e.fields=new i(e.fields||this.fields);this.fields=e.fields;this.model.errorModel=e.errorModel||this.model.errorModel||new c.Model;this.controls=[]},cleanup:function(){u.each(this.controls,function(e){e.remove()});this.controls.length=0},remove:function(){this.cleanup();c.View.prototype.remove.apply(this,arguments)},render:function(){this.cleanup();this.$el.empty();var e=this,r=this.$el,a=this.model,n=this.controls;this.fields.each(function(e){var t=new(e.get("control"))({field:e,model:a});r.append(t.render().$el);n.push(t)});return this}});var r=Backform.ControlFormatter=function(){};u.extend(r.prototype,{fromRaw:function(e,t){return e},toRaw:function(e,t){return e}});var a=Backform.JSONFormatter=function(){};u.extend(a.prototype,{fromRaw:function(e,t){return JSON.stringify(e)},toRaw:function(e,t){return JSON.parse(e)}});var n=Backform.Field=c.Model.extend({defaults:{name:"",placeholder:"",disabled:false,visible:true,required:false,value:undefined,control:undefined,formatter:undefined},initialize:function(e,t){var r=Backform.resolveNameToClass(this.get("control"),"Control");this.set({control:r},{silent:true})}});var i=Backform.Fields=c.Collection.extend({model:n});var s=Backform.Control=c.View.extend({defaults:{},className:function(){return Backform.groupClassName},events:{"keydown :input":"processTab"},template:u.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <span readonly class="<%=Backform.controlClassName%>" value="<%=value%>">',"</div>"].join("\n")),initialize:function(e){this.field=e.field;var t=Backform.resolveNameToClass(this.field.get("formatter")||this.formatter,"Formatter");if(!u.isFunction(t.fromRaw)&&!u.isFunction(t.toRaw)){t=new t}this.formatter=t;var r=this.field.get("name").split(".");var a=r.shift();this.listenTo(this.model,"change:"+a,this.render);if(this.model.errorModel instanceof c.Model)this.listenTo(this.model.errorModel,"change:"+a,this.updateInvalid)},formatter:r,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find(".uneditable-input").text(),this.model)},onChange:function(e){var t=this.model,r=d(e.target),a=this.field.get("name").split("."),n=a.shift(),i=a.join("."),s=this.getValueFromDOM(),o={};if(this.model.errorModel instanceof c.Model){if(u.isEmpty(i)){this.model.errorModel.unset(n)}else{var l=this.model.errorModel.get(n);if(l){this.keyPathSetter(l,i,null);this.model.errorModel.set(n,l)}}}o[n]=u.isEmpty(i)?s:u.clone(t.get(n))||{};if(!u.isEmpty(i))this.keyPathSetter(o[n],i,s);this.stopListening(this.model,"change:"+n,this.render);t.set(o);this.listenTo(this.model,"change:"+n,this.render)},render:function(){var e=u.defaults(this.field.toJSON(),this.defaults),t=this.model.toJSON(),r=e.name.split("."),a=r.shift(),n=r.join("."),i=this.keyPathAccessor(t[a],n),s=u.extend(e,{rawValue:i,value:this.formatter.fromRaw(i,this.model),attributes:t,formatter:this.formatter}),o=function(e,t){return u.isFunction(e)?!!e(t):!!e};u.extend(s,{disabled:o(s.disabled,this.model),visible:o(s.visible,this.model),required:o(s.required,this.model)});this.$el.removeClass(Backform.hiddenClassName);if(!s.visible)this.$el.addClass(Backform.hiddenClassName);if(Backform.requiredInputClassName){this.$el.removeClass(Backform.requiredInputClassName)}if(s.required){this.$el.addClass(Backform.requiredInputClassName)}this.$el.html(this.template(s)).addClass(e.name);this.updateInvalid();return this},clearInvalid:function(){this.$el.removeClass(Backform.errorClassName).find("."+Backform.helpClassName+".error").remove();return this},updateInvalid:function(){var s=this;var o=this.model.errorModel;if(!(o instanceof c.Model))return this;this.clearInvalid();this.$el.find(":input").not("button").each(function(e,t){var r=d(t).attr("name").split("."),a=r.shift(),n=r.join("."),i=s.keyPathAccessor(o.toJSON(),d(t).attr("name"));if(u.isEmpty(i))return;s.$el.addClass(Backform.errorClassName);if(e===0){s.$el.find("."+Backform.controlsClassName).append('<span class="'+Backform.helpClassName+' error">'+(u.isArray(i)?i.join(", "):i)+"</span>")}});return this},keyPathAccessor:function(e,t){var r=e;t=t.split(".");for(var a=0;a<t.length;a++){if(u.isNull(r))return null;if(u.isEmpty(t[a]))continue;if(!u.isUndefined(r[t[a]]))r=r[t[a]]}return u.isObject(r)&&!u.isArray(r)?null:r},keyPathSetter:function(e,t,r){t=t.split(".");while(t.length>1){if(!e[t[0]])e[t[0]]={};e=e[t.shift()]}return e[t.shift()]=r},processTab:function(t){if(t.which==9){var r=d(t.currentTarget);setTimeout(function(){var e;if(t.shiftKey){e=!!r.prevAll(":input:visible").length?r.prevAll(":input:visible").first():r.closest(".control-group:visible").prev(".control-group:visible").find(":input:visible")}else{e=!!r.nextAll(":input:visible").length?r.nextAll(":input:visible").first():r.closest(".control-group:visible").next(".control-group:visible").find(":input:visible")}if(e.length)e.first().focus()},0)}}});var o=Backform.UneditableInputControl=s;var l=Backform.HelpControl=s.extend({template:u.template(['<label class="<%=Backform.controlLabelClassName%>">&nbsp;</label>','<div class="<%=Backform.controlsClassName%>">','  <span class="<%=Backform.helpMessageClassName%> help-block"><%=label%></span>',"</div>"].join("\n"))});var f=Backform.SpacerControl=s.extend({template:u.template(['<div class="<%=Backform.controlsClassName%>"></div>'].join("\n"))});var p=Backform.TextareaControl=s.extend({defaults:{label:"",maxlength:4e3,extraClasses:[],helpMessage:null},template:u.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <textarea class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%>><%-value%></textarea>',"  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:u.extend({},s.prototype.events,{"change textarea":"onChange","focus textarea":"clearInvalid"}),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("textarea").val(),this.model)}});var g=Backform.SelectControl=s.extend({defaults:{label:"",options:[],extraClasses:[]},template:u.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <select class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-value%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> >',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-formatter.fromRaw(option.value)%>" <%=option.value === rawValue ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:u.extend({},s.prototype.events,{"change select":"onChange","focus select":"clearInvalid"}),formatter:a,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("select").val(),this.model)}});var b=Backform.MultiSelectControl=g.extend({defaults:{label:"",options:[],extraClasses:[],height:"78px"},template:u.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlsClassName%>">','  <select multiple="multiple" class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" value="<%-JSON.stringify(value)%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> style="height:<%=height%>">',"    <% for (var i=0; i < options.length; i++) { %>","      <% var option = options[i]; %>",'      <option value="<%-option.value%>" <%=value != null && _.indexOf(value, option.value) != -1 ? "selected=\'selected\'" : ""%> <%=option.disabled ? "disabled=\'disabled\'" : ""%>><%-option.label%></option>',"    <% } %>","  </select>","</div>"].join("\n")),events:u.extend({},s.prototype.events,{"change select":"onChange","dblclick select":"onDoubleClick","focus select":"clearInvalid"}),formatter:{fromRaw:function(e,t){return e},toRaw:function(e,t){return typeof e=="object"?e:JSON.parse(e)}},onDoubleClick:function(e){this.model.trigger("doubleclick",e)}});var _=Backform.InputControl=s.extend({defaults:{type:"text",label:"",maxlength:255,extraClasses:[],helpMessage:null},template:u.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <input type="<%=type%>" class="<%=Backform.controlClassName%> <%=extraClasses.join(\' \')%>" name="<%=name%>" maxlength="<%=maxlength%>" value="<%-value%>" placeholder="<%-placeholder%>" <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />',"  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),events:u.extend({},s.prototype.events,{"change input":"onChange","focus input":"clearInvalid"}),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").val(),this.model)}});var h=Backform.BooleanControl=_.extend({defaults:{type:"checkbox",label:"",controlLabel:"&nbsp;",extraClasses:[],id:u.uniqueId("bf_")},template:u.template(['<label class="<%=Backform.controlLabelClassName%>"><%=controlLabel%></label>','<div class="<%=Backform.controlContainerClassName%>">','  <div class="form-check">','    <input type="<%=type%>" class="form-check-input <%=extraClasses.join(\' \')%>" id="<%=id%>" name="<%=name%>" <%=value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />','    <label class="form-check-label" for="<%=id%>"><%=label%></label>',"  </div>","</div>"].join("\n")),getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input").is(":checked"),this.model)}});var v=Backform.CheckboxControl=h;var m=Backform.RadioControl=_.extend({defaults:{type:"radio",label:"",options:[],extraClasses:[],helpMessage:null},template:u.template(['<label class="<%=Backform.controlLabelClassName%>"><%=label%></label>','<div class="<%=Backform.controlContainerClassName%> d-flex">',"  <% for (var i=0; i < options.length; i++) { %>","    <% var option = options[i]; %>",'    <% var id = _.uniqueId("bf_"); %>','  <div class="form-check">','    <input type="<%=type%>" class="<%=extraClasses.join(\' \')%>" id="<%=id%>" name="<%=name%>" value="<%-formatter.fromRaw(option.value)%>" <%=rawValue == option.value ? "checked=\'checked\'" : ""%> <%=disabled ? "disabled" : ""%> <%=required ? "required" : ""%> />','    <label class="form-check-label" for="<%=id%>"><%-option.label%></label>',"  </div>","  <% } %>","  <% if (helpMessage && helpMessage.length) { %>",'    <span class="<%=Backform.helpMessageClassName%>"><%=helpMessage%></span>',"  <% } %>","</div>"].join("\n")),formatter:a,getValueFromDOM:function(){return this.formatter.toRaw(this.$el.find("input:checked").val(),this.model)},bootstrap2:function(){Backform.radioControlsClassName="controls";Backform.radioLabelClassName="radio inline"}});u.extend(Backform,{radioControlsClassName:"checkbox",radioLabelClassName:"checkbox-inline"});var y=Backform.DatepickerControl=_.extend({defaults:{type:"text",label:"",options:{},extraClasses:[],maxlength:255,helpMessage:null},events:u.extend({},s.prototype.events,{"blur input":"onChange","change input":"onChange","changeDate input":"onChange","focus input":"clearInvalid"}),render:function(){_.prototype.render.apply(this,arguments);this.$el.find("input").datepicker(this.field.get("options"));return this}});var w=Backform.ButtonControl=s.extend({defaults:{type:"submit",label:"Submit",status:undefined,message:undefined,extraClasses:[]},template:u.template(['<label class="<%=Backform.controlLabelClassName%>">&nbsp;</label>','<div class="<%=Backform.controlsClassName%>">','  <button type="<%=type%>" name="<%=name%>" class="btn <%=extraClasses.join(\' \')%>" <%=disabled ? "disabled" : ""%> ><%=label%></button>','  <% var cls = ""; if (status == "error") cls = Backform.buttonStatusErrorClassName; if (status == "success") cls = Backform.buttonStatusSuccessClassname; %>','  <span class="status <%=cls%>"><%=message%></span>',"</div>"].join("\n")),initialize:function(){s.prototype.initialize.apply(this,arguments);this.listenTo(this.field,"change:status",this.render);this.listenTo(this.field,"change:message",this.render)},bootstrap2:function(){Backform.buttonStatusErrorClassName="text-error";Backform.buttonStatusSuccessClassname="text-success"}});u.extend(Backform,{buttonStatusErrorClassName:"text-danger",buttonStatusSuccessClassname:"text-success"});return Backform})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var a=n(r(15));r(52);r(69);r(70);r(53);r(71);r(72);r(73);r(74);r(46);r(75);r(54);r(76);r(77);r(78);r(79);r(34);r(43);function n(e){return e&&e.__esModule?e:{default:e}}var i=a.default;t.default=i},function(e,t,r){"use strict";var a,n;!(a=[r(0),r(1),r(2),r(4)],n=function(a,i,o,l){var u={epicRandomString:function e(t){var r=[];var a="0123456789abcdef";for(var n=0;n<36;n++){r[n]=a.substr(Math.floor(Math.random()*16),1)}r[14]="4";r[19]=a.substr(r[19]&3|8,1);r[8]=r[13]=r[18]=r[23]="-";var i=r.join("");return i.replace(/-/g,"").substr(0,t)},getHash:function e(t){var r=0,a=t.length;for(var n=0;n<a;n++){r=(r<<5)-r+t.charCodeAt(n);r|=0}return r},calculateColumnWidth:function e(t){a("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var r=a("#pg_text").width()+23;a("#pg_text").remove();return r},capitalizeFirstLetter:function e(t){return t.charAt(0).toUpperCase()+t.slice(1)},previousStatus:null,fetchConnectionStatus:function e(t,n,i){var r=l("sqleditor.connection_status",{trans_id:t.transId});if(document.visibilityState!=="visible"||n.data("panel-visible")!=="visible"){return}if(i.hasClass("obtaining-conn")){return}var s=t;a.ajax({url:r,method:"GET"}).done(function(e){if(e&&e.data){var t=e.data.status,r=e.data.message,a=false;s.update_notifications(e.data.notifies);switch(t){case 1:if(t==u.previousStatus&&!i.hasClass("fa-hourglass-half")){i.removeClass().addClass("fa fa-hourglass-half");a=true}break;case 2:if(u.previousStatus!=t&&!i.hasClass("fa-clock-o")){i.removeClass().addClass("fa fa-clock-o");a=true}break;case 3:if(u.previousStatus!=t&&!i.hasClass("fa-exclamation-circle")){i.removeClass().addClass("fa fa-exclamation-circle");a=true}break;case 4:if(u.previousStatus!=t&&!i.hasClass("fa-exclamation-triangle")){i.removeClass().addClass("fa fa-exclamation-triangle");a=true}break;default:if(u.previousStatus!=t&&!i.hasClass("fa-query_tool_connected")){i.removeClass().addClass("fa-custom fa-query-tool-connected");a=true}}u.previousStatus=t;if(a){n.popover("hide");n.attr("data-content",r)}}else{u.previousStatus=-99;r=o("An unexpected error occurred - "+"ensure you are logged into the application.");n.attr("data-content",r);if(!i.hasClass("fa-query-tool-disconnected")){n.popover("hide");i.removeClass().addClass("fa-custom fa-query-tool-disconnected")}}}).fail(function(e){u.previousStatus=-1;var t=o("Transaction status check failed.");if(e.readyState==0){t=o("Not connected to the server or the connection to "+"the server has been closed.")}else if(e.responseJSON&&e.responseJSON.errormsg){t=e.responseJSON.errormsg}n.attr("data-content",t);if(!i.hasClass("fa-query-tool-disconnected")){n.popover("hide");i.removeClass().addClass("fa-custom fa-query-tool-disconnected")}})},updateConnectionStatusFlag:function e(t){var r=a(".connection_status");if(r.data("panel-visible")!=t){r.data("panel-visible",t)}},calcFontSize:function e(t){if(t){var r=Number(Math.round(t+"e+2")+"e-2");if(r>0){return r+"em"}}return"1em"},addEditableIcon:function e(t,r){var a=null;if(r){a='<i class="fa fa-pencil"></i>'}else{a='<i class="fa fa-lock"></i>'}var n={cssClass:"editable-column-header-icon",content:a};if(!i.isUndefined(t.header)&&!i.isUndefined(t.header.buttons)){t.header.buttons.push(n)}else{t.header={buttons:[n]}}}};return u}.apply(t,a),n!==undefined&&(e.exports=n))},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.processEventDebugger=m;t.processEventQueryTool=E;t.focusDockerPanel=T;t.validateShortcutKeys=v;t._stopEventPropagation=h;t.isMac=i;t.isKeyCtrlAlt=s;t.isKeyAltShift=o;t.isKeyCtrlShift=u;t.isKeyCtrlAltShift=d;t.isAltShiftBoth=c;t.isCtrlShiftBoth=f;t.isCtrlAltBoth=p;t.shortcut_key=g;t.shortcut_title=b;t.shortcut_accesskey_title=_;var y=n(r(0));var a=n(r(2));var l=r(17);function n(e){return e&&e.__esModule?e:{default:e}}var w=190,k=191,D=27,C=37,x=38,N=39,S=40;function i(){return window.navigator.platform.search("Mac")!=-1}function s(e){return e.ctrlKey||e.altKey}function o(e){return e.altKey||e.shiftKey}function u(e){return e.ctrlKey||e.shiftKey}function d(e){return e.ctrlKey||e.altKey||e.shiftKey}function c(e){return e.altKey&&e.shiftKey&&!e.ctrlKey}function f(e){return e.ctrlKey&&e.shiftKey&&!e.altKey}function p(e){return e.ctrlKey&&e.altKey&&!e.shiftKey}function g(e){var t="";if(e["key"]&&e["key"]["char"]){t=e["key"]["char"].toUpperCase()}return t}function b(e,t){var r="";if(typeof t==="undefined"||t===null){return r}if(t["alt"]){r=(0,a.default)("Alt")+"+"}if(t["shift"]){r+=(0,a.default)("Shift")+"+"}if(t["control"]){r+=(0,a.default)("Ctrl")+"+"}r+=g(t);return(0,a.default)("%(title)s (%(text_representation)s)",{title:e,text_representation:r})}function _(e,t){return(0,a.default)("%(title)s (accesskey + %(key)s)",{title:e,key:g(t)})}function h(e){e.cancelBubble=true;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()}function v(e,t){if(!e){return false}var r=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==r}function T(e,t){if(!e){return}if(!e._focusFrame){if(e._frameList.length==0&&e._frameList[0]._panelList.length==0){return}e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var r=e._focusFrame,a=0,n=false;if(t=="switch"){var i=0,s=e._frameList.length;for(i=0;i<s;i++){if(r===e._frameList[i])break}r=e._frameList[(0,l.getMod)(i+1,s)];a=r._curTab;n=true}else if(t=="left"){a=(0,l.getMod)(r._curTab-1,r._panelList.length);n=false}else if(t=="right"){a=(0,l.getMod)(r._curTab+1,r._panelList.length);n=false}var o=r._panelList[a];o.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus");o.focus(n);return o._type}function m(e,t,r,a){var n="",i,s;if(this.validateShortcutKeys(r.edit_grid_values,t)){this._stopEventPropagation(t);i=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")');if(i.length){s=(0,y.default)(i).find("td.editable:first");if(s.length)s.trigger("click")}}else if(this.validateShortcutKeys(r.move_next,t)){this._stopEventPropagation(t);n=T(a,"right")}else if(this.validateShortcutKeys(r.move_previous,t)){this._stopEventPropagation(t);n=T(a,"left")}else if(this.validateShortcutKeys(r.switch_panel,t)){this._stopEventPropagation(t);n=T(a,"switch")}return n}function E(e,t,r,a){if(e.isQueryRunning()){return}var n=r.which||r.keyCode,i="";var s=e.preferences.execute_query;var o=e.preferences.explain_query;var l=e.preferences.explain_analyze_query;var u=e.preferences.download_csv;var d=e.preferences.move_next;var c=e.preferences.move_previous;var f=e.preferences.switch_panel;var p=e.preferences.toggle_case;var g=e.preferences.commit_transaction;var b=e.preferences.rollback_transaction;var _=e.preferences.save_data;if(this.validateShortcutKeys(s,r)){this._stopEventPropagation(r);t.executeQuery(e)}else if(this.validateShortcutKeys(o,r)){this._stopEventPropagation(r);t.explain(e)}else if(this.validateShortcutKeys(l,r)){this._stopEventPropagation(r);t.explainAnalyze(e)}else if(this.validateShortcutKeys(u,r)){this._stopEventPropagation(r);t.download(e)}else if(this.validateShortcutKeys(p,r)){this._stopEventPropagation(r);t.toggleCaseOfSelectedText(e)}else if(this.validateShortcutKeys(g,r)){if(!e.is_transaction_buttons_disabled){this._stopEventPropagation(r);t.executeCommit(e)}}else if(this.validateShortcutKeys(b,r)){if(!e.is_transaction_buttons_disabled){this._stopEventPropagation(r);t.executeRollback(e)}}else if(this.validateShortcutKeys(_,r)){this._stopEventPropagation(r);t.saveDataChanges(e)}else if((this.isMac()&&r.metaKey||!this.isMac()&&r.ctrlKey)&&!r.altKey&&r.shiftKey&&n===k){this._stopEventPropagation(r);t.commentBlockCode(e)}else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&n===k){this._stopEventPropagation(r);t.commentLineCode(e)}else if((this.isMac()&&!this.isKeyCtrlAltShift(r)&&r.metaKey||!this.isMac()&&!this.isKeyAltShift(r)&&r.ctrlKey)&&n===w){this._stopEventPropagation(r);t.uncommentLineCode(e)}else if(n==D){t.focusOut(e);if((0,y.default)(r.target).hasClass("dropdown-item")&&(0,y.default)(r.target).closest(".dropdown-submenu").length>0){(0,y.default)(r.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show")}}else if(this.validateShortcutKeys(d,r)){this._stopEventPropagation(r);i=T(a,"right")}else if(this.validateShortcutKeys(c,r)){this._stopEventPropagation(r);i=T(a,"left")}else if(this.validateShortcutKeys(f,r)){this._stopEventPropagation(r);i=T(a,"switch")}else if(n===x||n===S){if((0,y.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var h=(0,y.default)(r.target).closest("li");(0,y.default)(r.target).closest(".dropdown-menu").find(".show").removeClass("show");if(n===x){h=h.prev()}else if(n===S){h=h.next()}while(h.hasClass("dropdown-divider")||h.hasClass("d-none")||h.find(".dropdown-item").first().hasClass("disabled")){if(n===x){h=h.prev()}else if(n===S){h=h.next()}}h.find(".dropdown-item").trigger("focus")}}else if(n===C||n===N){if((0,y.default)(r.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(r);var v=(0,y.default)(r.target).closest("li");if(n===N){if(v.hasClass("dropdown-submenu")){v.find(".dropdown-menu").addClass("show");v=v.find(".dropdown-menu .dropdown-item").first().trigger("focus")}}else if(n===C){var m=v.closest(".dropdown-menu");if(m.closest(".dropdown-submenu").length>0){m.removeClass("show");v=m.closest(".dropdown-submenu");v.find(".dropdown-item").trigger("focus")}}}}return i}},,,,,,function(e,s,o){"use strict";(function(t){var r,a,n;function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}(function(e){if((false?undefined:i(s))=="object"&&(false?undefined:i(t))=="object")e(o(15));else if(true)!(a=[o(15)],r=e,n=typeof r==="function"?r.apply(s,a):r,n!==undefined&&(t.exports=n));else{}})(function(C){"use strict";var a=function e(t,r,a){var n=r.line,i=t.getLine(n);var s=i.length,o,l;var u=0;var d=a[u].start,c=a[u].end;for(;s>0;){var f=i.lastIndexOf(d,s);var p=d;var g=c;if(f<r.ch){u++;if(u>=a.length){return undefined}d=a[u].start;c=a[u].end;s=i.length;continue}l=t.getTokenAt(C.Pos(n,f+1)).type;if(!/^(comment|string)/.test(l)){o=f;break}s=f-1}if(o==null||i.lastIndexOf(p)>o)return;var b=1,_=t.lineCount(),h,v;e:for(var m=n+1;m<_;++m){var y=t.getLine(m),w=0;for(;;){var k=y.indexOf(p,w),D=y.indexOf(g,w);if(k<0)k=y.length;if(D<0)D=y.length;w=Math.min(k,D);if(w==y.length)break;if(t.getTokenAt(C.Pos(m,w+1)).type==l){if(w==k)++b;else if(!--b){h=m;v=w;break e}}++w}}if(h==null||h==n+1)return;return{from:C.Pos(n,o+d.length),to:C.Pos(h,v)}};C.registerHelper("fold","sql",function(e,t){var r=a(e,t,[{start:"BEGIN",end:"END;"},{start:"IF",end:"END IF"},{start:"LOOP",end:"END LOOP"},{start:"CASE",end:"END CASE"}]);return r})})}).call(this,o(33)(e))},,,,,,,function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,r){"use strict";var a=n(r(15));function n(e){return e&&e.__esModule?e:{default:e}}a.default.defineExtension("centerOnLine",function(e){var t=this.getScrollInfo().clientHeight;var r=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(r.top+r.bottom-t)/2)})},function(e,t,r){"use strict";var a=i(r(0));var n=i(r(1));function i(e){return e&&e.__esModule?e:{default:e}}function s(){if(!n.default.isUndefined(window.opener)&&!n.default.isNull(window.opener)){return window.opener.pgAdmin.Browser}else{return window.parent.pgAdmin.Browser}}function o(e,t){var r=e.get_preference("browser","enable_acitree_animation").value;if(n.default.isUndefined(t)){t=e.tree}if(r){t.options({animateRoot:true,unanimated:false,show:n.default.extend(t.options().show,{duration:75}),hide:n.default.extend(t.options().hide,{duration:75}),view:n.default.extend(t.options().view,{duration:75})})}else{t.options({animateRoot:false,unanimated:true,show:n.default.extend(t.options().show,{duration:0}),hide:n.default.extend(t.options().hide,{duration:0}),view:n.default.extend(t.options().view,{duration:0})})}}function l(e){if(n.default.isUndefined(e)||n.default.isNull(e)){e=s()}var t=e.get_preference("browser","enable_alertify_animation").value;if(t){(0,a.default)(document).find("link#alertify-no-animation").attr("disabled","disabled");n.default.each(document.getElementsByTagName("iframe"),function(e){(0,a.default)(e.contentDocument).find("link#alertify-no-animation").attr("disabled","disabled")})}else{(0,a.default)(document).find("link#alertify-no-animation").removeAttr("disabled","disabled");n.default.each(document.getElementsByTagName("iframe"),function(e){(0,a.default)(e.contentDocument).find("link#alertify-no-animation").removeAttr("disabled","disabled")})}}e.exports={modifyAcitreeAnimation:o,modifyAlertifyAnimation:l}},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setPGCSRFToken=n;var o=a(r(0));var l=a(r(9));var u=a(r(25));function a(e){return e&&e.__esModule?e:{default:e}}function n(a,n){if(!n){throw"csrf-token meta tag has not been set"}var i=l.default.sync;l.default.sync=function(e,t,r){r.beforeSend=function(e){e.setRequestHeader(a,n)};return i(e,t,r)};var s=l.default.get;l.default.get=function(e,t,r){r.beforeSend=function(e){e.setRequestHeader(a,n)};return s(e,t,r)};o.default.ajaxSetup({beforeSend:function e(t){t.setRequestHeader(a,n)}});u.default.interceptors.request.use(function(e){e.headers[a]=n;return e},function(e){return Promise.reject(e)})}},function(e,t){e.exports=n},,,function(e,b,_){"use strict";(function(s){Object.defineProperty(b,"__esModule",{value:true});b.isValidTreeNodeData=b.Tree=b.TreeNode=void 0;var e=_(17);var o=t(_(0));function t(e){return e&&e.__esModule?e:{default:e}}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);if(e)a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){a(r,true).forEach(function(e){n(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{a(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}function n(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function i(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){i=function e(t){return typeof t}}else{i=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(e)}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function r(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}var c=function(){function n(e,t,r,a){u(this,n);this.id=e;this.data=t;this.setParent(a);this.children=[];this.domNode=r}r(n,[{key:"hasParent",value:function e(){return this.parentNode!==null&&this.parentNode!==undefined}},{key:"parent",value:function e(){return this.parentNode}},{key:"setParent",value:function e(t){this.parentNode=t;this.path=this.id;if(t!==null&&t!==undefined&&t.path!==undefined){this.path=t.path+"."+this.id}}},{key:"getData",value:function e(){if(this.data===undefined){return undefined}else if(this.data===null){return null}return Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function e(){return this.domNode}},{key:"reload",value:function e(t){var r=this;this.unload(t);t.aciTreeApi.setInode(this.domNode);t.aciTreeApi.deselect(this.domNode);setTimeout(function(){t.selectNode(r.domNode)},0)}},{key:"unload",value:function e(t){this.children=[];t.aciTreeApi.unload(this.domNode)}},{key:"ancestorNode",value:function e(t){var r=this;while(r.hasParent()){r=r.parent();if(t(r)){return r}}return null}},{key:"anyFamilyMember",value:function e(t){if(t(this)){return true}return this.ancestorNode(t)!==null}},{key:"anyParent",value:function e(t){return this.ancestorNode(t)!==null}}]);return n}();b.TreeNode=c;var f=function(){function e(){u(this,e);this.rootNode=new c(undefined,{});this.aciTreeApi=undefined;this.draggableTypes={}}r(e,[{key:"registerDraggableType",value:function e(t){var r=this;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(i(t)=="object"){Object.keys(t).forEach(function(e){r.registerDraggableType(e,t[e])})}else{if(a!=null){t.replace(/ +/," ").split(" ").forEach(function(e){r.draggableTypes[e]=a})}}}},{key:"getDraggable",value:function e(t){if(this.draggableTypes[t]){return this.draggableTypes[t]}else{return null}}},{key:"prepareDraggable",value:function e(a,n){var i=this.getDraggable(a._type);if(i!=null){n.find(".aciTreeItem").attr("draggable",true)[0].addEventListener("dragstart",function(e){var t=i(a,n);if(typeof t=="string"){t={text:t,cur:{from:t.length,to:t.length}}}else{if(!t.cur){t=l({},t,{cur:{from:t.text.length,to:t.text.length}})}}e.dataTransfer.setData("text",JSON.stringify(t));if(e.dataTransfer.dropEffect){e.dataTransfer.dropEffect="move"}if(e.dataTransfer.setDragImage){var r=(0,o.default)('\n              <div class="drag-tree-node">\n                <span>'.concat(s.escape(t.text),"</span>\n              </div>"));(0,o.default)("body .drag-tree-node").remove();(0,o.default)("body").append(r);e.dataTransfer.setDragImage(r[0],0,0)}})}}},{key:"addNewNode",value:function e(t,r,a,n){var i=this.findNode(n);return this.createOrUpdateNode(t,r,i,a)}},{key:"findNode",value:function e(t){if(t===null||t===undefined||t.length===0){return this.rootNode}return p(this.rootNode,t.join("."))}},{key:"findNodeByDomElement",value:function e(t){var r=this.translateTreeNodeIdFromACITree(t);if(!r||!r[0]){return undefined}return this.findNode(r)}},{key:"selected",value:function e(){return this.aciTreeApi.selected()}},{key:"selectNode",value:function e(t){this.aciTreeApi.select(t)}},{key:"createOrUpdateNode",value:function e(t,r,a,n){var i=[t];if(a!==null&&a!==undefined){i=[a.path,t]}var s=this.findNode(i);if(s!==null){s.data=r;return s}var o=new c(t,r,n,a);if(a===this.rootNode){o.parentNode=null}a.children.push(o);return o}},{key:"register",value:function e(t){t.on("acitree",function(e,t,r,a){if(t.isItem(r)){if(a==="added"||a==="idset"){var n=t.getId(r);var i=t.itemData(r);if(a==="added"){this.prepareDraggable(i,r)}var s=this.translateTreeNodeIdFromACITree(t.parent(r));this.addNewNode(n,i,r,s)}}}.bind(this));this.aciTreeApi=t.aciTree("api")}},{key:"translateTreeNodeIdFromACITree",value:function e(t){var r=t;var a=[];while(r!==null&&r!==undefined&&r.length>0){a.unshift(this.aciTreeApi.getId(r));if(this.aciTreeApi.hasParent(r)){r=this.aciTreeApi.parent(r)}else{break}}return a}}]);return e}();b.Tree=f;function p(e,i){if(i===null){return e}return function e(t){if(t.path!==undefined&&i!==undefined&&!i.startsWith(t.path)){return null}for(var r=0,a=t.children.length;r<a;r++){var n=e(t.children[r]);if(n!==null){return n}}if(t.path===i){return t}else{return null}}(e)}var g=e.isValidData;b.isValidTreeNodeData=g}).call(this,_(1))},,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeToolbar=f;t.enable=p;var a=s(r(2));var n=s(r(1));var i=s(r(3));function s(e){return e&&e.__esModule?e:{default:e}}var o={};var l=null;var u=[{label:(0,a.default)("Filtered Rows"),btnClass:"fa fa-filter",text:"",toggled:false,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:false},{label:(0,a.default)("View Data"),btnClass:"fa fa-table",text:"",toggled:false,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:false},{label:(0,a.default)("Query Tool"),btnClass:"fa fa-bolt",text:"",toggled:false,toggleClass:"",parentClass:"pg-toolbar-btn",enabled:false}];var d=[];function c(e){if(!(e.label in o)||n.default.findIndex(l._buttonList,{name:e.label})<0){l.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled);o[e.label]=e}}function f(e,t){l=e;n.default.each(u,function(e){c(e)});n.default.each(d,function(e){c(e)});e.on(t.EVENT.BUTTON,function(e){if("name"in e&&e.name===(0,a.default)("Query Tool"))i.default.DataGrid.show_query_tool("",i.default.Browser.tree.selected());else if("name"in e&&e.name===(0,a.default)("View Data"))i.default.DataGrid.show_data_grid({mnuid:3},i.default.Browser.tree.selected());else if("name"in e&&e.name===(0,a.default)("Filtered Rows"))i.default.DataGrid.show_filtered_row({mnuid:4},i.default.Browser.tree.selected())})}function p(e,t){if(e in o){l.buttonEnable(e,t)}else{console.warn("Developer warning: No tool button found with label: "+e)}}},function(e,t,r){"use strict";var l=a(r(0));var n=a(r(49));var u=r(17);function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}function o(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}var d=function(){function a(e,t,r){i(this,a);this.dialogContainer=e;this.tabSwitching=false;this.tabs=this.dialogContainer.find(".nav-tabs");if(this.tabs.length>0){this.tabs=this.tabs[0]}this.dialogTabBackward=(0,u.parseShortcutValue)(t);this.dialogTabForward=(0,u.parseShortcutValue)(r);(0,n.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this));(0,n.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}o(a,[{key:"onKeyboardEvent",value:function e(t,r){var a=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first"),n=this.isActivePaneHasChildTabs(a);if(this.tabSwitching){return}this.tabSwitching=true;if(n){var i=this.navigate(r,n.childTab,n.childTabPane,t);if(!i){this.navigate(r,this.tabs,a,t)}}else{this.navigate(r,this.tabs,a,t)}}},{key:"isActivePaneHasChildTabs",value:function e(t){var r=t.find(".nav-tabs:first"),a;if(r.length>0){a=t.find(".tab-content:first > .tab-pane.active:first");return{childTab:r,childTabPane:a}}return null}},{key:"navigate",value:function e(t,r,a,n){if(t==this.dialogTabBackward){return this.navigateBackward(r,a,n)}else if(t==this.dialogTabForward){return this.navigateForward(r,a,n)}return false}},{key:"navigateBackward",value:function e(t,r,a){var n=this,i,s,o=(0,l.default)(t).find("li").has("a.active").prev("li");if(o.length>0){o.find("a").tab("show");i=r.prev();s=i.find(".tab-content:first > .tab-pane.active:first");if(s.length>0){(0,u.findAndSetFocus)(s)}else{(0,u.findAndSetFocus)(i)}setTimeout(function(){n.tabSwitching=false},200);a.stopPropagation();return true}this.tabSwitching=false;return false}},{key:"navigateForward",value:function e(t,r,a){var n=this,i,s,o=(0,l.default)(t).find("li").has("a.active").next("li");if(o.length>0){o.find("a").tab("show");i=r.next();s=i.find(".tab-content:first > .tab-pane.active:first");if(s.length>0){(0,u.findAndSetFocus)(s)}else{(0,u.findAndSetFocus)(i)}setTimeout(function(){n.tabSwitching=false},200);a.stopPropagation();return true}this.tabSwitching=false;return false}},{key:"detach",value:function e(){(0,n.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward);(0,n.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}]);return a}();e.exports={dialogTabNavigator:d}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getHelpUrl=a;function a(e,t,r){var a=Math.floor(r/1e4),n=Math.floor(r/100)-a*100,i="";if(a>=10){i=e.replace("$VERSION$",a)}else{i=e.replace("$VERSION$",a+"."+n)}if(i.substr(-1)!="/"){i=i+"/"}return i+t}},function(e,t,r){"use strict";var o=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n,i){var s="";o.default.each(o.default.sortBy(o.default.pick(t,n),function(e){return e.priority}),function(e){s="".concat(s,"/").concat(encodeURI(e._id))});s=i?"".concat(s,"/").concat(i):"".concat(s,"/");return"".concat(e).concat(a,"/").concat(r).concat(s)}e.exports={generate_url:n}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.browserTreeState=t.pgBrowser=void 0;var p=o(r(1));var a=o(r(0));var n=o(r(4));var i=o(r(2));var s=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return c(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++){r[t]=e[t]}return r}}var g=s.default.Browser=s.default.Browser||{};t.pgBrowser=g;var f=g.browserTreeState=g.browserTreeState||{};t.browserTreeState=f;p.default.extend(g.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function e(){var t=g.get_preference("browser","browser_tree_state_save_interval");if(!p.default.isUndefined(t)&&t.value!==-1){setInterval(this.save_state,t.value*1e3);this.fetch_state.apply(this);g.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this);g.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this);g.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this)}else if(!p.default.isUndefined(t)){a.default.ajax({url:(0,n.default)("settings.reset_tree_state"),type:"DELETE"}).fail(function(e){var t=e.responseText;if(e.status==417||e.status==410||e.status==500){try{var r=JSON.parse(e.responseText);t=r.errormsg}catch(e){console.warn(e.stack||e)}}console.warn((0,i.default)('Error resetting the tree saved state."'),t)})}},save_state:function e(){var t=g.browserTreeState;if(t.last_state==JSON.stringify(t.current_state))return;a.default.ajax({url:(0,n.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(t.current_state)}).done(function(){t.last_state=JSON.stringify(t.current_state)}).fail(function(e){var t=e.responseText;if(e.status==417||e.status==410||e.status==500){try{var r=JSON.parse(e.responseText);t=r.errormsg}catch(e){console.warn(e.stack||e)}}console.warn((0,i.default)('Error saving the tree state."'),t)})},fetch_state:function e(){var t=this;a.default.ajax({url:(0,n.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done(function(e){t.stored_state=e}).fail(function(e){var t=e.responseText;if(e.status==417||e.status==410||e.status==500){try{var r=JSON.parse(e.responseText);t=r.errormsg}catch(e){console.warn(e.stack||e)}}console.warn((0,i.default)("Error fetching the tree state."),t)})},update_cache:function e(t){var r=t&&g.tree.itemData(t),a=r&&g.Nodes[r._type],n=a.getTreeNodeHierarchy(t),i=undefined,s=g.tree.pathId(t),o=s.join(),l=[],u=-1;if(!g.tree.hasParent(t)||!(this.parent in n))return;i=n[this.parent]["_id"];if(g.tree.isOpen(t)){s.push(r.id);l=s.join();if(!(i in this.current_state)){this.current_state[i]={paths:[],selected:{},conn_status:{},is_opened:{}}}var d=p.default.find(this.current_state[i]["paths"],function(e){return e.search(l)!==-1});if(p.default.isUndefined(d)){if(!p.default.isUndefined(this.current_state[i]["paths"])){u=this.current_state[i]["paths"].indexOf(o)}else{this.current_state[i]["paths"]=[]}if(u!==-1){this.current_state[i]["paths"][u]=l}else{this.current_state[i]["paths"].push(l)}}}this.update_database_status(t);this.update_current_selected_item(n)},remove_from_cache:function e(t){var a=this,r=a.stored_state||{},n=t&&g.tree.itemData(t),i=n&&g.Nodes[n._type],s=i&&i.getTreeNodeHierarchy(t);if(!g.tree.hasParent(t)||!(a.parent in s))return;var o=s&&s[a.parent]["_id"],l=s&&s[a.orig_parent]["id"];this.update_database_status(t);if(n._type==a.parent||n._type=="database"){if(o in r&&"paths"in r[o]){r[o]["paths"]=a.current_state[o]["paths"];a.save_state()}return}if(g.tree.isClosed(t)){var u=a.current_state[o]["paths"],d=undefined;if("database"in s)d=s["database"]["id"];if(!p.default.isUndefined(u)&&!p.default.isUndefined(u.length)){var c=0,f=undefined;p.default.each(u,function(e){if(p.default.isUndefined(e))return;var t=e.split(",");if(t.indexOf(n.id)!==-1){if(d===undefined||d!==undefined&&t.indexOf(d)!==-1){var r=t.indexOf(n.id);t.splice(r);f=t.join();if(f==l)a.current_state[o]["paths"].splice(e,1);else a.current_state[o]["paths"][c]=f}}c++})}}},expand_from_previous_state:function e(n){var i=this,s=i.stored_state||{},o=n&&g.tree.itemData(n),t=o&&g.Nodes[o._type],l=t&&t.getTreeNodeHierarchy(n);if(!g.tree.hasParent(n)||!(i.parent in l))return;if(o["_type"]==i.parent&&g.tree.isOpen(n)===false)return;var r=s[l[i.parent]["_id"]];if(o["_type"]=="database"&&r&&"conn_status"in r&&"is_opened"in r&&(r["conn_status"][o["id"]]===0||r["is_opened"][o["id"]]===0||!(o["id"]in r["is_opened"])))return;if(!p.default.isUndefined(r)&&"paths"in r&&!p.default.isUndefined(r["paths"].length)){var a=d(r["paths"]),u=undefined;if("database"in l)u=l["database"]["id"];p.default.each(a,function(e){if(p.default.isUndefined(e))return;var t=e.split(",");if(t.indexOf(o.id)!==-1){if(u===undefined||u!==undefined&&t.indexOf(u)!==-1){var r=t.indexOf(o.id);g.tree.toggle(n);if(r==t.length-1){var a=s[l[i.parent]["_id"]]["paths"].indexOf(e);s[l[i.parent]["_id"]]["paths"].splice(a,1)}}}})}this.select_tree_item(n)},update_database_status:function e(t){var r=t&&g.tree.itemData(t),a=r&&g.Nodes[r._type],n=a.getTreeNodeHierarchy(t);if("database"in n){var i=n["database"]["id"],s=n&&n[this.parent]["_id"];if(s in this.current_state&&"selected"in this.current_state[s]){if(n["database"].connected){this.current_state[s]["conn_status"][i]=1}else{this.current_state[s]["conn_status"][i]=0}if(r._type=="database"){if(g.tree.isOpen(t)){this.current_state[s]["is_opened"][i]=1}else{this.current_state[s]["is_opened"][i]=0}}}}},update_current_selected_item:function e(t){if(!(this.parent in t))return;var r=t&&t[this.parent]["_id"],a=g.tree.itemData(g.tree.selected()),n=undefined;a=a?a.id:undefined;if("database"in t){n=t["database"]["id"]}if(r in this.current_state&&"selected"in this.current_state[r]&&!p.default.isUndefined(a)){this.current_state[r]["selected"][t[this.parent]["id"]]=a;if(!p.default.isUndefined(n))this.current_state[r]["selected"][n]=a}},select_tree_item:function e(t){var r=this.stored_state||{},a=t&&g.tree.itemData(t),n=a&&g.Nodes[a._type],i=n&&n.getTreeNodeHierarchy(t),s=r[i[this.parent]["_id"]];if("database"in i){var o=i["database"]["id"];if(s&&"selected"in s&&o in s["selected"]){if(s["selected"][o]==a.id){g.tree.select(t)}}}}})},function(e,t,r){"use strict";var a,n;!(a=[r(2),r(4),r(0),r(1),r(9),r(10),r(3),r(5),r(12),r(21)],n=function(L,I,V,K,a,q,e,F,G){var p=window.wcDocker;var R=function e(t){var r=t.get("type");if(r.indexOf("[]")!=-1){var a=r.replace("[]","");switch(a){case"boolean":return G.Extension.InputBooleanArrayCell;case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return G.Extension.InputIntegerArrayCell;case"real":case"numeric":case"double precision":case"decimal":return G.Extension.InputNumberArrayCell;default:return G.Extension.InputStringArrayCell}}else{switch(r){case"boolean":return G.BooleanCell.extend({formatter:G.BooleanCellFormatter});case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":if(t.get("value")!=undefined){t.set({value:parseInt(t.get("value"))},{silent:true})}return G.IntegerCell;case"real":case"numeric":case"double precision":case"decimal":if(t.get("value")!=undefined){t.set({value:parseFloat(t.get("value"))},{silent:true})}return G.NumberCell;case"string":return G.StringCell;case"date":return G.DateCell;default:return G.Cell}}};var $=function e(t){var r=t.get("type");if(r.indexOf("[]")!=-1){return G.StringCell}return G.BooleanCell};var t=a.Model.extend({defaults:{name:undefined,type:undefined,is_null:undefined,expr:undefined,value:undefined,use_default:undefined,default_value:undefined},validate:function e(){if(K.isUndefined(this.get("value"))||K.isNull(this.get("value"))||String(this.get("value")).replace(/^\s+|\s+$/g,"")==""){var t=L("Please enter a value for the parameter.");this.errorModel.set("value",t);return t}else{this.errorModel.unset("value")}return null}});var U=a.Collection.extend({model:t});var z=function e(t){if(t instanceof a.Model){return t.get("use_default")}return false};var H=function e(t){if(t instanceof a.Model){var r=t.get("type");if(r.indexOf("[]")!=-1){return false}return true}};var r=function e(t,r,a,n){if(!q.debuggerInputArgsDialog){q.dialog("debuggerInputArgsDialog",function e(){return{main:function e(t,r,a,n,i){this.preferences=window.top.pgAdmin.Browser.get_preferences_for_module("debugger");this.set("title",t);this.set("debug_info",r);this.set("restart_debug",a);this.set("trans_id",i);var s=this.func_args_data=[];if(a==0){var o=F.tree,l=o.selected(),u=l&&l.length==1?o.itemData(l):undefined,d=u&&F.Nodes[u._type];if(!u)return;var c=d.getTreeNodeHierarchy.apply(d,[l]),f;if(u._type=="function"){f=I("debugger.get_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.function._id})}else if(u._type=="procedure"){f=I("debugger.get_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.procedure._id})}else if(u._type=="edbfunc"){f=I("debugger.get_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.edbfunc._id})}else if(u._type=="edbproc"){f=I("debugger.get_arguments",{sid:c.server._id,did:c.database._id,scid:c.schema._id,func_id:c.edbproc._id})}}else{f=I("debugger.get_arguments",{sid:r.server_id,did:r.database_id,scid:r.schema_id,func_id:r.function_id})}V.ajax({url:f,method:"GET",async:false}).done(function(e){if(e.data.args_count!=0){for(l=0;l<e.data.result.length;l++){s.push({arg_id:e.data.result[l]["arg_id"],is_null:e.data.result[l]["is_null"],is_expression:e.data.result[l]["is_expression"],use_default:e.data.result[l]["use_default"],value:e.data.result[l]["value"]})}}}).fail(function(){q.alert(L("Debugger Error"),L("Unable to fetch the arguments from server"))});var p,g,b,_,h,v;var m=G.HeaderCell.extend({className:"width_percent_25"});var y=[],w=[{name:"name",label:L("Name"),type:"text",editable:false,cell:"string"},{name:"type",label:L("Type"),type:"text",editable:false,cell:"string"},{name:"is_null",label:L("Null?"),type:"boolean",cell:"boolean"},{name:"expr",label:L("Expression?"),type:"boolean",cellFunction:$,editable:H},{name:"value",label:L("Value"),type:"text",editable:true,cellFunction:R,headerCell:m},{name:"use_default",label:L("Use Default?"),type:"boolean",cell:"boolean",editable:z},{name:"default_value",label:L("Default"),type:"text",editable:false,cell:"string"}];var k=[];var D=[];var C=this.input_arg_id=[],x;if(r["proargmodes"]!=null){var N=r["proargmodes"].split(",");for(x=0;x<N.length;x++){if(N[x]=="i"||N[x]=="b"||n&&N[x]=="o"){C.push(x)}}}else{var S=r["proargtypenames"].split(",");for(x=0;x<S.length;x++){C.push(x)}}g=r["proargtypenames"].split(",");if(r["proargmodes"]!=null){b=r["proargmodes"].split(",")}if(r["pronargdefaults"]){_=r["pronargdefaults"];h=r["proargdefaults"].split(",");v=_}var T,E,O,P,B;if(r["proargnames"]!=null){p=r["proargnames"].split(",");for(B=p.length-1;B>=0;B--){if(r["proargmodes"]!=null){if(b[B]=="i"||b[B]=="b"||n&&b[B]=="o"){if(v){v=v-1;y[B]=h[v]}else{y[B]="<no default>"}}}else if(v){v=v-1;y[B]=h[v]}else{y[B]="<no default>"}}if(g.length!=0){for(l=0;l<g.length;l++){if(r["proargmodes"]!=null){if(b[l]=="i"||b[l]=="b"||n&&b[l]=="o"){P=false;if(y[l]!="<no default>"){P=true}k.push({name:p[l],type:g[l],use_default:P,default_value:y[l]})}}else{P=false;if(y[l]!="<no default>"){P=true}k.push({name:p[l],type:g[l],use_default:P,default_value:y[l]})}}}if(s.length!=0){for(l=0;l<s.length;l++){if(r["proargmodes"]!=null&&b[l]=="o"&&!n){continue}O=s[l]["arg_id"];E=[];if(g[O].indexOf("[]")!=-1){T=s[l]["value"].split(",");K.each(T,function(e){E.push({value:e})})}else{E=s[l]["value"]}D.push({name:p[O],type:g[O],is_null:s[l]["is_null"]?true:false,expr:s[l]["is_expression"]?true:false,value:E,use_default:s[l]["use_default"]?true:false,default_value:y[O]})}}}else{var M=[];for(l=0;l<g.length;l++){M[l]="dbgparam"+(l+1)}if(!r["pronargdefaults"]){for(l=0;l<g.length;l++){k.push({name:M[l],type:g[l],use_default:false,default_value:"<No default value>"});y[l]="<No default value>"}}else{for(B=M.length-1;B>=0;B--){if(r["proargmodes"]==null){if(v){v=v-1;y[B]=h[v]}else{y[B]="<No default value>"}}else{if(v){v=v-1;y[B]=h[v]}else{y[B]="<No default value>"}}}for(l=0;l<g.length;l++){if(r["proargmodes"]==null){P=false;if(y[l]!="<No default value>"){P=true}k.push({name:M[l],type:g[l],use_default:P,default_value:y[l]})}else{if(b[l]=="i"||b[l]=="b"||n&&b[l]=="o"){P=false;if(y[l]!="<No default value>"){P=true}k.push({name:M[l],type:g[l],use_default:P,default_value:y[l]})}}}}if(s.length!=0){for(l=0;l<s.length;l++){O=s[l]["arg_id"];E=[];if(g[O].indexOf("[]")!=-1){T=s[l]["value"].split(",");K.each(T,function(e){E.push({value:e})})}else{E=s[l]["value"]}D.push({name:M[O],type:g[O],is_null:s[l]["is_null"]?true:false,expr:s[l]["is_expression"]?true:false,value:E,use_default:s[l]["use_default"]?true:false,default_value:y[O]})}}}if(s.length==0){this.debuggerInputArgsColl=new U(k)}else{this.debuggerInputArgsColl=new U(D)}if(this.grid){this.grid.remove();this.grid=null}var A=this.grid=new G.Grid({columns:w,collection:this.debuggerInputArgsColl,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});A.render();V(this.elements.content).html(A.el);var j=V(A.el).find("input:checkbox").first();if(j.length){setTimeout(function(){j.trigger("click")},250)}},settings:{debug_info:undefined,restart_debug:undefined,trans_id:undefined},setup:function e(){return{buttons:[{text:L("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:L("Debug"),key:13,className:"btn btn-primary fa fa-bug pg-alertify-button"}],options:{padding:!1,overflow:!1,model:0,resizable:true,maximizable:true,pinnable:false,closableByDimmer:false,modal:false}}},callback:function e(t){if(t.button.text===L("Debug")){var i=this;if(i.setting("restart_debug")==0){var r=F.tree,a=r.selected(),s=a&&a.length==1?r.itemData(a):undefined,n=s&&F.Nodes[s._type];if(!s)return;var o=n.getTreeNodeHierarchy.apply(n,[a])}var l=[];var u=this.sqlite_func_args_list=[];var d=0;this.grid.collection.each(function(e){if(e.get("is_null")){l.push({name:e.get("name"),type:e.get("type"),value:"NULL"})}else{if(e.get("use_default")){l.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")})}else{l.push({name:e.get("name"),type:e.get("type"),value:e.get("value")})}}if(i.setting("restart_debug")==0){var t;if(s._type=="function"){t=o.function._id}else if(s._type=="procedure"){t=o.procedure._id}else if(s._type=="edbfunc"){t=o.edbfunc._id}else if(s._type=="edbproc"){t=o.edbproc._id}u.push({server_id:o.server._id,database_id:o.database._id,schema_id:o.schema._id,function_id:t,arg_id:i.input_arg_id[d],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})}else{u.push({server_id:i.setting("debug_info").server_id,database_id:i.setting("debug_info").database_id,schema_id:i.setting("debug_info").schema_id,function_id:i.setting("debug_info").function_id,arg_id:i.input_arg_id[d],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})}d=d+1});var c;if(i.setting("restart_debug")==0){if(s._type=="function"){c=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.function._id})}else if(s._type=="procedure"){c=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.procedure._id})}else if(s._type=="edbfunc"){c=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.edbfunc._id})}else if(s._type=="edbproc"){c=I("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:i.setting("trans_id"),sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.edbproc._id})}V.ajax({url:c,method:"POST",data:{data:JSON.stringify(l)}}).done(function(t){var r=I("debugger.direct",{trans_id:t.data.debuggerTransId});if(i.preferences.debugger_new_browser_tab){window.open(r,"_blank")}else{F.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",function(e){e.openURL(r)});var e=F.docker.findPanels("properties"),a=F.docker.addPanel("frm_debugger",p.DOCK.STACKED,e[0]);a.focus();a.on(p.EVENT.CLOSED,function(){var e=I("debugger.close",{trans_id:t.data.debuggerTransId});V.ajax({url:e,method:"DELETE"})})}var n;if(s._type=="function"){n=I("debugger.set_arguments",{sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.function._id})}else if(s._type=="procedure"){n=I("debugger.set_arguments",{sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.procedure._id})}else if(s._type=="edbfunc"){n=I("debugger.set_arguments",{sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.edbfunc._id})}else if(s._type=="edbproc"){n=I("debugger.set_arguments",{sid:o.server._id,did:o.database._id,scid:o.schema._id,func_id:o.edbproc._id})}V.ajax({url:n,method:"POST",data:{data:JSON.stringify(u)}}).done(function(){}).fail(function(){q.alert(L("Debugger Error"),L("Unable to set the arguments on the server"))})}).fail(function(e){q.alert(L("Debugger Target Initialization Error"),e.responseJSON.errormsg)})}else{c=I("debugger.start_listener",{trans_id:i.setting("debug_info").trans_id});V.ajax({url:c,method:"POST",data:{data:JSON.stringify(l)}}).done(function(){}).fail(function(e){q.alert(L("Debugger Listener Startup Error"),e.responseJSON.errormsg)});var f=I("debugger.set_arguments",{sid:i.setting("debug_info").server_id,did:i.setting("debug_info").database_id,scid:i.setting("debug_info").schema_id,func_id:i.setting("debug_info").function_id});V.ajax({url:f,method:"POST",data:{data:JSON.stringify(u)}}).done(function(){}).fail(function(){q.alert(L("Debugger Error"),L("Unable to set the arguments on the server"))})}return true}if(t.button.text===L("Cancel")){V.ajax({method:"DELETE",url:I("debugger.close",{trans_id:this.setting("trans_id")})});return false}},build:function e(){q.pgDialogBuild.apply(this)},prepare:function e(){V(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties");if(this.func_args_data.length==0){this.__internal.buttons[1].element.disabled=true}else{this.__internal.buttons[1].element.disabled=false}this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",function(r){return function(){var e=false;for(var t=0;t<this.collection.length;t++){if(this.collection.models[t].get("is_null")){r.__internal.buttons[1].element.disabled=false;e=true;continue}if(this.collection.models[t].get("value")==null||this.collection.models[t].get("value")==undefined){e=true;if(this.collection.models[t].get("use_default")){r.__internal.buttons[1].element.disabled=false}else{r.__internal.buttons[1].element.disabled=true;break}}}if(!e)r.__internal.buttons[1].element.disabled=false}}(this));this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:error",function(e){return function(){e.__internal.buttons[1].element.disabled=true}}(this))}}})}q.debuggerInputArgsDialog(L("Debugger"),t,r,a,n).resizeTo(F.stdW.md,F.stdH.md)};return r}.apply(t,a),n!==undefined&&(e.exports=n))},function(e,t,r){"use strict";function a(e,t){var r=9;if(!t)return;var a=t.which||t.keyCode;if(a!==r){e.focus()}}function n(e){var t;if(e){if(e.function&&e.function._id){t=e.function._id}else if(e.edbfunc&&e.edbfunc._id){t=e.edbfunc._id}}return t}function i(e){var t;if(e){if(e.procedure&&e.procedure._id){t=e.procedure._id}else if(e.edbproc&&e.edbproc._id){t=e.edbproc._id}}return t}e.exports={setFocusToDebuggerEditor:a,getFunctionId:n,getProcedureId:i}},,,,,,,,,,,function(e,t,r){"use strict";var a,n;!(a=[r(0),r(1),r(8)],n=function(e,i,s){var t=function e(t,r){if(i.isUndefined(r)||i.isNull(r)){return true}if(s.startsWith(r,"coll-")){r=r.replace("coll-","")}var a=["server_group","server","catalog_object_column"];if(i.indexOf(a,r)>=0){return true}var n=t.get_preference("browser","show_node_"+r);if(n){return n.value}else{return true}};return t}.apply(t,a),n!==undefined&&(e.exports=n))},,function(e,r,a){"use strict";(function(s){Object.defineProperty(r,"__esModule",{value:true});r.pgBrowser=void 0;var n=t(a(3));var i=t(a(4));var o=t(a(0));var l=e(a(10));var u=e(a(24));function e(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(a.get||a.set){Object.defineProperty(t,r,a)}else{t[r]=e[r]}}}}t.default=e;return t}}function t(e){return e&&e.__esModule?e:{default:e}}var d=a(44);var c=n.default.Browser=n.default.Browser||{};r.pgBrowser=c;s.extend(c,{preferences_cache:[],prefcache_version:0,generate_preference_version:function e(){return(new Date).getTime()},preference_version:function e(t){if(t){this.prefcache_version=t}else{return this.prefcache_version}},get_preference:function e(t,r){var a=this;if(s.size(a.preferences_cache)==0){var n=function e(){if(a.preferences_cache.length>0){clearInterval(i);return s.findWhere(a.preferences_cache,{module:t,name:r})}},i=setInterval(n,1e3)}else{return s.findWhere(a.preferences_cache,{module:t,name:r})}},get_preferences_for_module:function e(t){var r=this;var a={};s.each(s.where(r.preferences_cache,{module:t}),function(e){a[e.name]=e.value});if(Object.keys(a).length>0){return a}},get_preference_for_id:function e(t){var r=this;return s.findWhere(r.preferences_cache,{id:t})},cache_preferences:function e(t){var r=this,a={};a[n.default.csrf_token_header]=n.default.csrf_token;setTimeout(function(){o.default.ajax({url:(0,i.default)("preferences.get_all"),headers:a}).done(function(e){r.preferences_cache=e;r.preference_version(r.generate_preference_version());c.keyboardNavigation.init();if(c.tree){d.modifyAcitreeAnimation(r);d.modifyAlertifyAnimation(r)}c.browserTreeState.init();if(t){if(typeof t==="string"){o.default.event.trigger("prefchange:"+t)}else{s.each(t,function(e,t){o.default.event.trigger("prefchange:"+t)})}}}).fail(function(e,t,r){l.pgRespErrorNotify(e,r)})},500)},reflectPreferences:function e(t){var r=this;if(t==="sqleditor"||t===null||typeof t==="undefined"){var a=r.get_preferences_for_module("sqleditor");(0,o.default)(r.editor.getWrapperElement()).css("font-size",u.calcFontSize(a.sql_font_size));r.editor.setOption("tabSize",a.tab_size);r.editor.setOption("lineWrapping",a.wrap_code);r.editor.setOption("autoCloseBrackets",a.insert_pair_brackets);r.editor.setOption("matchBrackets",a.brace_matching);r.editor.refresh()}},onPreferencesChange:function e(t,r){window.parent.$(parent.document).on("prefchange:"+t,function(e){if(window.top===null){window.$(document).off(e)}else{r(e)}})}})}).call(this,a(1))},function(e,t){e.exports=i},function(e,d,c){"use strict";(function(n){Object.defineProperty(d,"__esModule",{value:true});d.pgBrowser=void 0;var e=r(c(3));var i=r(c(4));var s=r(c(0));var a=t(c(10));var o=r(c(2));c(21);function t(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(a.get||a.set){Object.defineProperty(t,r,a)}else{t[r]=e[r]}}}}t.default=e;return t}}function r(e){return e&&e.__esModule?e:{default:e}}var l=e.default.Browser=e.default.Browser||{};d.pgBrowser=l;var u=window.wcDocker;n.extend(l,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function e(t){var r=t.addPanel("browser",u.DOCK.LEFT);var a=t.addPanel("dashboard",u.DOCK.RIGHT,r);t.addPanel("properties",u.DOCK.STACKED,a,{tabOrientation:u.TAB.TOP});t.addPanel("sql",u.DOCK.STACKED,a);t.addPanel("statistics",u.DOCK.STACKED,a);t.addPanel("dependencies",u.DOCK.STACKED,a);t.addPanel("dependents",u.DOCK.STACKED,a)},save_current_layout:function e(t,r){if(r){var a=r.save(),n={setting:t,value:a};s.default.ajax({type:"POST",url:(0,i.default)("settings.store_bulk"),data:n})}},restore_layout:function e(t,r,a){if(r!=""){try{t.restore(r)}catch(e){t.clear();if(a){a(t)}}}else{if(a){a(t)}}var n=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;var i=setInterval(function(){var e=n.get_preferences_for_module("browser");if(e){clearInterval(i);n.reflectLocklayoutChange(t);n.onPreferencesChange("browser",function(){n.reflectLocklayoutChange(t)})}},500)},reflectLocklayoutChange:function e(t){var r=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;var a=r.get_preferences_for_module("browser");r.lock_layout(t,a.lock_layout)},lock_layout:function e(t,r){var a=this.menus["file"]["mnu_locklayout"]["menu_items"];switch(r){case this.lock_layout_levels.PREVENT_DOCKING:t.lockLayout(u.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:t.lockLayout(u.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:t.lockLayout(u.LOCK_LAYOUT_LEVEL.NONE);break}n.each(a,function(e){if(e.name!="mnu_lock_"+r){e.change_checked(false)}else{e.change_checked(true)}})},save_lock_layout:function e(t){var r=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;s.default.ajax({url:(0,i.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:t})}).done(function(){r.cache_preferences("browser")}).fail(function(e,t){a.pgNotifier(t,e,(0,o.default)("Failed to save the lock layout setting."))})},mnu_lock_docking:function e(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING);this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function e(){this.lock_layout(this.docker,this.lock_layout_levels.FULL);this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function e(){this.lock_layout(this.docker,this.lock_layout_levels.NONE);this.save_lock_layout(this.lock_layout_levels.NONE)}})}).call(this,c(1))},function(e,t,r){"use strict";var d=u(r(1));var c=u(r(3));var s=u(r(0));var o=u(r(49));var a=l(r(17));var n=u(r(56));var i=l(r(28));function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(a.get||a.set){Object.defineProperty(t,r,a)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(e){return e&&e.__esModule?e:{default:e}}var f=c.default.Browser=c.default.Browser||{};f.keyboardNavigation=f.keyboardNavigation||{};d.default.extend(f.keyboardNavigation,{init:function e(){o.default.reset();if(f.preferences_cache.length>0){this.keyboardShortcut={file_shortcut:a.parseShortcutValue(f.get_preference("browser","main_menu_file").value),object_shortcut:a.parseShortcutValue(f.get_preference("browser","main_menu_object").value),tools_shortcut:a.parseShortcutValue(f.get_preference("browser","main_menu_tools").value),help_shortcut:a.parseShortcutValue(f.get_preference("browser","main_menu_help").value),left_tree_shortcut:a.parseShortcutValue(f.get_preference("browser","browser_tree").value),tabbed_panel_backward:a.parseShortcutValue(f.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:a.parseShortcutValue(f.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:a.parseShortcutValue(f.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:a.parseShortcutValue(f.get_preference("browser","sub_menu_view_data").value),sub_menu_properties:a.parseShortcutValue(f.get_preference("browser","sub_menu_properties").value),sub_menu_create:a.parseShortcutValue(f.get_preference("browser","sub_menu_create").value),sub_menu_delete:a.parseShortcutValue(f.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:a.parseShortcutValue(f.get_preference("browser","sub_menu_refresh").value),context_menu:a.parseShortcutValue(f.get_preference("browser","context_menu").value),direct_debugging:a.parseShortcutValue(f.get_preference("browser","direct_debugging").value),drop_multiple_objects:a.parseShortcutValue(f.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:a.parseShortcutValue(f.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:a.parseShortcutValue(f.get_preference("browser","add_grid_row").value)};this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row}};this.bindShortcuts()}},bindShortcuts:function e(){var r=this;d.default.each(r.shortcutMethods,function(e,t){r._bindWithMousetrap(e.shortcuts,r[t],e.bindElem)});var t=37,a=38,n=39,i=40;(0,s.default)(".pg-navbar").on("keydown",function(e){switch(e.keyCode){case t:r.bindMainMenuLeft(e);break;case a:r.bindMainMenuUpDown(e,"up");break;case n:r.bindMainMenuRight(e);break;case i:r.bindMainMenuUpDown(e,"down");break}})},_bindWithMousetrap:function e(t,r,a){var n=this;o.default.unbind(t);if(a){var i=document.querySelector(a);(0,o.default)(i).bind(t,function(){r.apply(this,arguments)}.bind(i))}else{o.default.bind(t,function(){r.apply(n,arguments)})}},unbindShortcuts:function e(){var t=this;d.default.each(t.mousetrapInstances,function(e){e["instance"].reset()});t.mousetrapInstances=[]},bindMainMenu:function e(t,r){var a=this.keyboardShortcut;if(r===a.file_shortcut)(0,s.default)("#mnu_file a.dropdown-toggle").dropdown("toggle");if(r===a.object_shortcut)(0,s.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle");if(r===a.tools_shortcut)(0,s.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle");if(r===a.help_shortcut)(0,s.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function e(t,r){var a=c.default.Browser.docker.findPanels();var n=0;var i=a.length;var s=1;var o=0;var l=false;var u=this.keyboardShortcut;d.default.each(c.default.Browser.docker.findPanels(),function(e,t){if(e.isVisible()&&!l&&e._type!=="browser"){o=t;l=true}});if(r===u.tabbed_panel_backward)n=o>0?o-1:s;else if(r===u.tabbed_panel_forward)n=o<i?o+1:i;c.default.Browser.docker.findPanels()[n].focus();setTimeout(function(){if(document.activeElement instanceof HTMLIFrameElement){document.activeElement.blur()}},1e3)},bindMainMenuLeft:function e(t){if((0,s.default)(t.target).hasClass("nav-link")){var r=(0,s.default)(t.target).closest(".nav-item");i._stopEventPropagation(t);r=r.prev(".nav-item");while(r.hasClass("d-none")){r=r.prev(".nav-item")}r.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,s.default)(t.target).closest(".dropdown-menu").length>0){var a=(0,s.default)(t.target).closest("li");i._stopEventPropagation(t);var n=a.closest(".dropdown-menu");if(n.closest(".dropdown-submenu").length>0){n.removeClass("show");n.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible");a=n.closest(".dropdown-submenu");a.find(".dropdown-item").trigger("focus")}}},bindMainMenuRight:function e(t){if((0,s.default)(t.target).hasClass("nav-link")){var r=(0,s.default)(t.target).closest(".nav-item");i._stopEventPropagation(t);r=r.next(".nav-item");while(r.hasClass("d-none")){r=r.next(".nav-item")}r.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,s.default)(t.target).closest(".dropdown-menu").length>0){var a=(0,s.default)(t.target).closest("li");i._stopEventPropagation(t);if(a.hasClass("dropdown-submenu")){a.addClass("dropdown-submenu-visible");a.find(".dropdown-menu").addClass("show");a=a.find(".dropdown-menu .dropdown-item").first().trigger("focus")}}},bindMainMenuUpDown:function e(t,r){if((0,s.default)(t.target).closest(".dropdown-menu").length>0){i._stopEventPropagation(t);var a=(0,s.default)(t.target).closest("li");var n=(0,s.default)(t.target).closest(".dropdown-menu");n.find(".show").removeClass("show");n.find(".dropdown-submenu").removeClass("dropdown-submenu-visible");if(r==="up"){a=a.prev()}else if(r==="down"){a=a.next()}while(a.hasClass("dropdown-divider")||a.find(".dropdown-item").first().hasClass("disabled")){if(r==="up"){a=a.prev()}else if(r==="down"){a=a.next()}}a.find(".dropdown-item").trigger("focus")}},bindLeftTree:function e(){var t=this.getTreeDetails();(0,s.default)("#tree").trigger("focus");t.t.focus(t.i);t.t.select(t.i)},bindSubMenuQueryTool:function e(){var t=this.getTreeDetails();if(!t.d)return;c.default.DataGrid.show_query_tool("",t.i)},bindSubMenuViewData:function e(){var t=this.getTreeDetails();if(!t.d)return;c.default.DataGrid.show_data_grid({mnuid:1},t.i)},bindSubMenuProperties:function e(){var t=this.getTreeDetails();if(!t.d||c.default.Browser.Nodes[t.t.itemData(t.i)._type].collection_node===true)return;c.default.Browser.Node.callbacks.show_obj_properties.call(c.default.Browser.Nodes[t.t.itemData(t.i)._type],{action:"edit"})},bindSubMenuCreate:function e(){var t=this.getTreeDetails();if(!t.d||c.default.Browser.Nodes[t.t.itemData(t.i)._type].collection_node===true)return;c.default.Browser.Node.callbacks.show_obj_properties.call(c.default.Browser.Nodes[t.t.itemData(t.i)._type],{action:"create"})},bindSubMenuDelete:function e(){var t=this.getTreeDetails();if(!t.d||c.default.Browser.Nodes[t.t.itemData(t.i)._type].collection_node===true)return;c.default.Browser.Node.callbacks.delete_obj.call(c.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindSubMenuRefresh:function e(t){t.preventDefault();var r=f.keyboardNavigation.getTreeDetails();c.default.Browser.Node.callbacks.refresh.call(c.default.Browser.Nodes[r.t.itemData(r.i)._type])},bindContextMenu:function e(t){var r=this.getTreeDetails();var a=(0,s.default)(t.srcElement).find(".aciTreeEntry").position().left+70;var n=(0,s.default)(t.srcElement).find(".aciTreeEntry").position().top+70;r.t.blur(r.i);(0,s.default)("#tree").trigger("blur");r.i.children().contextMenu({x:a,y:n})},bindDirectDebugging:function e(){var t=this.getTreeDetails();var r=t.t.itemData(t.i)._type;if(!t.d||r!=="function"&&r!=="procedure")return;if(c.default.Tools.Debugger.can_debug(t.d,t.i,{debug_type:"direct"})){c.default.Tools.Debugger.get_function_information(c.default.Browser.Nodes[r])}},bindDropMultipleObjects:function e(){var t=this.isPropertyPanelVisible();if(t===true&&(0,s.default)("button.delete_multiple").length>0){(0,s.default)("button.delete_multiple").click()}},bindDropCascadeMultipleObjects:function e(){var t=this.isPropertyPanelVisible();if(t===true&&(0,s.default)("button.delete_multiple_cascade").length>0){(0,s.default)("button.delete_multiple_cascade").click()}},bindAddGridRow:function e(){var t=(0,s.default)(document.activeElement).closest(".object.subnode");if((0,s.default)(t).length){(0,s.default)(t).find(".add").click()}},isPropertyPanelVisible:function e(){var t=false;d.default.each(c.default.Browser.docker.findPanels(),function(e){if(e._type==="properties")t=e.isVisible()});return t},getTreeDetails:function e(){var t=c.default.Browser.tree;var r=t.selected().length>0?t.selected():t.first();var a=r&&r.length===1?t.itemData(r):undefined;return{t:t,i:r,d:a}},getDialogTabNavigator:function e(t){var r=f.get_preference("browser","dialog_tab_backward").value;var a=f.get_preference("browser","dialog_tab_forward").value;return new n.default.dialogTabNavigator(t,r,a)}});e.exports=c.default.Browser.keyboardNavigation},function(e,t,r){"use strict";var a,n;!(a=[r(2),r(4),r(0),r(1),r(10),r(3),r(5),r(9),r(12),r(6),r(23),r(84),r(28),r(85),r(21)],n=function(d,l,u,c,f,s,n,p,g,e,t,i,a,b){var o=t.default,_=window.wcDocker;if(s.Browser.tree!=null){s=s||window.pgAdmin||{}}var h=s.Tools=s.Tools||{};if(h.DirectDebug)return h.DirectDebug;var v=new function(){};c.extend(v,p.Events,{enable:function e(t,r){this.trigger("pgDebugger:button:state:"+t,r)},enable_toolbar_buttons:function e(){var t=this;t.enable("stop",true);t.enable("step_over",true);t.enable("step_into",true);t.enable("toggle_breakpoint",true);t.enable("clear_all_breakpoints",true);t.enable("continue",true)},disable_toolbar_buttons:function e(){var t=this;t.enable("stop",false);t.enable("step_over",false);t.enable("step_into",false);t.enable("toggle_breakpoint",false);t.enable("clear_all_breakpoints",false);t.enable("continue",false)},set_breakpoint:function e(t,r,a){var n=l("debugger.set_breakpoint",{trans_id:t,line_no:r,set_type:a});u.ajax({url:n,method:"GET"}).done(function(e){if(e.data.status){}}).fail(function(){f.alert(d("Debugger Error"),d("Error while setting debugging breakpoint."))})},UpdateBreakpoint:function e(t){var r=this;var a=r.GetBreakpointInformation(t);if(a.length==1&&a[0].linenumber==-1)return;var n=new Array;for(var i=0;i<a.length;i++){if(a[i].linenumber!=-1){n.push(a[i].linenumber)}}for(i=0;i<n.length;i++){var s=h.DirectDebug.editor.lineInfo(n[i]-1);if(s.gutterMarkers!=undefined){h.DirectDebug.editor.setGutterMarker(n[i]-1,"breakpoints",null)}else{h.DirectDebug.editor.setGutterMarker(n[i]-1,"breakpoints",function(){var e=document.createElement("div");e.style.color="#822";e.innerHTML="";return e}())}}},GetBreakpointInformation:function e(t){var r="";var a=l("debugger.execute_query",{trans_id:t,query_type:"get_breakpoints"});u.ajax({url:a,method:"GET",async:false}).done(function(e){if(e.data.status==="Success"){r=e.data.result}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while fetching breakpoint information."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while fetching breakpoint information."))});return r},setActiveLine:function e(t){var r=this;var a=h.DirectDebug.editor;if(t&&r.active_line_no){a.removeLineClass(r.active_line_no,"wrap","CodeMirror-activeline-background")}if(!t&&r.active_line_no){t=r.active_line_no}if(t>0){r.active_line_no=t;a.addLineClass(r.active_line_no,"wrap","CodeMirror-activeline-background");a.centerOnLine(r.active_line_no)}},start_execution:function e(t,r){var a=this;var n=l("debugger.start_execution",{trans_id:t,port_num:r});u.ajax({url:n,method:"GET"}).done(function(e){if(e.data.status==="Success"){a.execute_query(t)}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while starting debugging session."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while starting debugging session."))})},execute_query:function e(t){var r=this;var a=l("debugger.execute_query",{trans_id:t,query_type:"wait_for_breakpoint"});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status==="Success"){if(e.data.result[0].src!=null&&e.data.result[0].linenumber!=null){h.DirectDebug.editor.setValue(e.data.result[0].src);r.setActiveLine(e.data.result[0].linenumber-2)}r.GetStackInformation(t);if(h.DirectDebug.debug_type){r.poll_end_execution_result(t)}}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while executing requested debugging information."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while executing requested debugging information."))})},GetLocalVariables:function e(t){var r=this;var a=l("debugger.execute_query",{trans_id:t,query_type:"get_variables"});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status==="Success"){r.AddLocalVariables(e.data.result);r.AddParameters(e.data.result);if(h.DirectDebug.debug_restarted){if(h.DirectDebug.debug_type){r.poll_end_execution_result(t)}h.DirectDebug.debug_restarted=false}}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while fetching variable information."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while fetching variable information."))})},GetStackInformation:function e(t){var r=this;var a=l("debugger.execute_query",{trans_id:t,query_type:"get_stack_info"});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status==="Success"){r.AddStackInformation(e.data.result);r.GetLocalVariables(h.DirectDebug.trans_id)}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while fetching stack information."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while fetching stack information."))})},poll_result:function e(t){var r=this;if(!h.DirectDebug.is_polling_required){return}var a=l("debugger.poll_result",{trans_id:t}),n;if(h.DirectDebug.polling_timeout_idle){n=1e3}else{n=200}setTimeout(function(){u.ajax({url:a,method:"GET",beforeSend:function e(t){t.setRequestHeader(s.csrf_token_header,s.csrf_token);u(".debugger-container").addClass("show_progress")}}).done(function(e){u(".debugger-container").removeClass("show_progress");if(e.data.status==="Success"){if(e.data.result==null||e.data.result.length==0){r.poll_result(t)}else{if(e.data.result[0].src!=undefined||e.data.result[0].src!=null){h.DirectDebug.polling_timeout_idle=false;h.DirectDebug.docker.finishLoading(50);if(e.data.result[0].src!=h.DirectDebug.editor.getValue()){h.DirectDebug.editor.setValue(e.data.result[0].src);r.UpdateBreakpoint(t)}r.setActiveLine(e.data.result[0].linenumber-2);r.GetStackInformation(t)}else if(!h.DirectDebug.debug_type&&!h.DirectDebug.first_time_indirect_debug){h.DirectDebug.docker.finishLoading(50);r.setActiveLine(-1);r.clear_all_breakpoint(t);r.execute_query(t);h.DirectDebug.first_time_indirect_debug=true;h.DirectDebug.polling_timeout_idle=false}else{h.DirectDebug.polling_timeout_idle=false;h.DirectDebug.docker.finishLoading(50);if(e.data.result[0].src!=h.DirectDebug.editor.getValue()){h.DirectDebug.editor.setValue(e.data.result[0].src);r.UpdateBreakpoint(t)}r.setActiveLine(e.data.result[0].linenumber-2);r.GetStackInformation(t)}setTimeout(function(){r.enable_toolbar_buttons()},500)}}else if(e.data.status==="Busy"){h.DirectDebug.polling_timeout_idle=true;if(!h.DirectDebug.debug_type){h.DirectDebug.docker.startLoading(d("Waiting for another session to invoke the target..."));r.disable_toolbar_buttons();h.DirectDebug.first_time_indirect_debug=false;r.poll_result(t)}else{r.poll_result(t)}}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while polling result."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while polling result."))})},n)},update_messages:function e(t){t=c.escape(t);var r="",a="";r=h.DirectDebug.messages_panel.$container.find(".messages").html();if(r){a=(r+"\n"+t).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />")}else{a=t}h.DirectDebug.messages_panel.$container.find(".messages").html(a)},poll_end_execution_result:function e(t){var r=this;if(!h.DirectDebug.is_polling_required){return}var a=l("debugger.poll_end_execution_result",{trans_id:t}),n;if(h.DirectDebug.polling_timeout_idle){n=1200}else{n=250}setTimeout(function(){u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status==="Success"){if(e.data.result==undefined){r.setActiveLine(-1);h.DirectDebug.direct_execution_completed=true;h.DirectDebug.polling_timeout_idle=true;f.success(e.info,3);if(e.data.status_message){r.update_messages(e.data.status_message)}u(".debugger-container").removeClass("show_progress");setTimeout(function(){r.enable("stop",false);r.enable("step_over",false);r.enable("step_into",false);r.enable("toggle_breakpoint",false);r.enable("clear_all_breakpoints",false);r.enable("continue",true)},500);h.DirectDebug.is_polling_required=false}else{if(e.data.result!=null){r.setActiveLine(-1);r.AddResults(e.data.col_info,e.data.result);h.DirectDebug.results_panel.focus();h.DirectDebug.direct_execution_completed=true;h.DirectDebug.polling_timeout_idle=true;f.success(e.info,3);if(e.data.status_message){r.update_messages(e.data.status_message)}u(".debugger-container").removeClass("show_progress");setTimeout(function(){r.enable("stop",false);r.enable("step_over",false);r.enable("step_into",false);r.enable("toggle_breakpoint",false);r.enable("clear_all_breakpoints",false);r.enable("continue",true)},500);h.DirectDebug.is_polling_required=false}}}else if(e.data.status==="Busy"){r.poll_end_execution_result(t);if(e.data.status_message){r.update_messages(e.data.status_message)}}else if(e.data.status==="NotConnected"){f.alert(d("Debugger poll end execution error"),e.data.result)}else if(e.data.status==="ERROR"){h.DirectDebug.direct_execution_completed=true;r.setActiveLine(-1);if(!h.DirectDebug.is_user_aborted_debugging){f.error(e.info,3)}if(e.data.status_message){r.update_messages(e.data.status_message)}h.DirectDebug.messages_panel.focus();u(".debugger-container").removeClass("show_progress");r.enable("stop",false);r.enable("step_over",false);r.enable("step_into",false);r.enable("toggle_breakpoint",false);r.enable("clear_all_breakpoints",false);if(!h.DirectDebug.is_user_aborted_debugging){r.enable("continue",true);h.DirectDebug.is_user_aborted_debugging=false}h.DirectDebug.is_polling_required=false}}).fail(function(){f.alert(d("Debugger Error"),d("Error while polling result."))})},n)},Restart:function e(a){var n=this,t=l("debugger.restart",{trans_id:a});n.disable_toolbar_buttons();h.DirectDebug.messages_panel.$container.find(".messages").html("");u.ajax({url:t}).done(function(e){var t=e.data.restart_debug?1:0;h.DirectDebug.polling_timeout_idle=false;h.DirectDebug.is_polling_required=true;n.poll_result(a);if(t){h.DirectDebug.debug_restarted=true}if(e.data.result.require_input){i(e.data.result,t)}else{var r=l("debugger.start_listener",{trans_id:a});u.ajax({url:r,method:"GET"}).done(function(){if(h.DirectDebug.debug_type){n.poll_end_execution_result(a)}}).fail(function(){f.alert(d("Debugger Error"),d("Error while polling result."))})}}).fail(function(e){try{var t=JSON.parse(e.responseText);if(t.success==0){f.alert(d("Debugger Error"),t.errormsg)}}catch(e){console.warn(e.stack||e)}})},Continue:function e(t){var r=this;r.disable_toolbar_buttons();if(h.DirectDebug.direct_execution_completed&&h.DirectDebug.direct_execution_completed==h.DirectDebug.polling_timeout_idle){r.Restart(t)}else{var a=l("debugger.execute_query",{trans_id:t,query_type:"continue"});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status){r.poll_result(t)}else{f.alert(d("Debugger Error"),d("Error while executing continue in debugging session."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while executing continue in debugging session."))})}},Step_over:function e(t){var r=this;r.disable_toolbar_buttons();var a=l("debugger.execute_query",{trans_id:t,query_type:"step_over"});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status){r.poll_result(t)}else{f.alert(d("Debugger Error"),d("Error while executing step over in debugging session."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while executing step over in debugging session."))})},Step_into:function e(t){var r=this;r.disable_toolbar_buttons();var a=l("debugger.execute_query",{trans_id:t,query_type:"step_into"});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status){r.poll_result(t)}else{f.alert(d("Debugger Error"),d("Error while executing step into in debugging session."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while executing step into in debugging session."))})},Stop:function e(t){var r=this;r.disable_toolbar_buttons();var a=l("debugger.execute_query",{trans_id:t,query_type:"abort_target"});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status){r.setActiveLine(-1);h.DirectDebug.direct_execution_completed=true;h.DirectDebug.is_user_aborted_debugging=true;h.DirectDebug.is_polling_required=false;r.enable("continue",false);f.success(e.info,3)}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while executing stop in debugging session."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while executing stop in debugging session."))})},toggle_breakpoint:function e(t){var r=this;r.disable_toolbar_buttons();var a=h.DirectDebug.editor.lineInfo(r.active_line_no);var n="";if(a.gutterMarkers==undefined){n=l("debugger.set_breakpoint",{trans_id:t,line_no:r.active_line_no+1,set_type:"1"})}else{n=l("debugger.set_breakpoint",{trans_id:t,line_no:r.active_line_no+1,set_type:"0"})}u.ajax({url:n,method:"GET"}).done(function(e){if(e.data.status){var t=h.DirectDebug.editor.lineInfo(r.active_line_no);if(t.gutterMarkers!=undefined){h.DirectDebug.editor.setGutterMarker(r.active_line_no,"breakpoints",null)}else{h.DirectDebug.editor.setGutterMarker(r.active_line_no,"breakpoints",function(){var e=document.createElement("div");e.style.color="#822";e.innerHTML="";return e}())}r.enable_toolbar_buttons()}else if(e.data.status==="NotConnected"){f.alert(d("Debugger Error"),d("Error while toggling breakpoint."))}}).fail(function(){f.alert(d("Debugger Error"),d("Error while toggling breakpoint."))})},clear_all_breakpoint:function e(t){var a=this,r=a.GetBreakpointInformation(t);if(r.length==1&&r[0].linenumber==-1)return;a.disable_toolbar_buttons();var n=new Array;for(var i=0;i<r.length;i++){if(r[i].linenumber!=-1){n.push(r[i].linenumber)}}var s=l("debugger.clear_all_breakpoint",{trans_id:t});u.ajax({url:s,method:"POST",data:{breakpoint_list:n.join()}}).done(function(e){if(e.data.status){for(var t=0;t<n.length;t++){var r=h.DirectDebug.editor.lineInfo(n[t]-1);if(r){if(r.gutterMarkers!=undefined){h.DirectDebug.editor.setGutterMarker(n[t]-1,"breakpoints",null)}}}}a.enable_toolbar_buttons()}).fail(function(){f.alert(d("Debugger Error"),d("Error while clearing all breakpoint."))})},AddStackInformation:function e(t){var r=this;if(r.stack_grid){r.stack_grid.remove();r.stack_grid=null}var a=p.Model.extend({defaults:{frame_id:0,name:undefined,value:undefined,line_no:undefined}});var n=p.Collection.extend({model:a});var i=[{name:"name",label:d("Name"),type:"text",editable:false,cell:"string"},{name:"value",label:d("Value"),type:"text",editable:false,cell:"string"},{name:"line_no",label:d("Line No."),type:"text",editable:false,cell:"string"}];var s=[];for(var o=0;o<t.length;o++){s.push({frame_id:o,name:t[o].targetname,value:t[o].args,line_no:t[o].linenumber})}var l=this.stackColl=new n(s);this.stackColl.on("backgrid:row:selected",r.select_frame,r);var u=this.stack_grid=new g.Grid({emptyText:"No data found",columns:i,row:g.Row.extend({events:{click:"rowClick"},rowClick:function e(){r.frame_id=this.model.get("frame_id");this.model.trigger("backgrid:row:selected",this);r.stack_grid.$el.find("td").css("background-color",this.disabledColor);this.$el.find("td").css("background-color",this.highlightColor)}}),collection:l,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});u.render();h.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(u.el)},AddResults:function e(t,r){var a=this;if(a.result_grid){a.result_grid.remove();a.result_grid=null}var n=p.Model.extend({defaults:{name:undefined}});var i=p.Collection.extend({model:n});var s=[];if(c.size(t)){c.each(t,function(e){var t={type:"text",editable:false,cell:"string"};t["name"]=t["label"]=e.name;s.push(t)})}var o=this.result_grid=new g.Grid({emptyText:"No data found",columns:s,collection:new i(r),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});o.render();h.DirectDebug.results_panel.$container.find(".debug_results").append(o.el)},AddLocalVariables:function e(t){var r=this;if(r.variable_grid){r.variable_grid.remove();r.variable_grid=null}var a=p.Model.extend({defaults:{name:undefined,type:undefined,value:undefined}});var n=p.Collection.extend({model:a});n.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:d("Name"),type:"text",editable:false,cell:"string"},{name:"type",label:d("Type"),type:"text",editable:false,cell:"string"},{name:"value",label:d("Value"),type:"text",cell:"string"}];var s=[];if(t.length!=0){for(var o=0;o<t.length;o++){if(t[o].varclass=="L"){s.push({name:t[o].name,type:t[o].dtype,value:t[o].value})}}}var l=this.variable_grid=new g.Grid({emptyText:"No data found",columns:i,collection:new n(s),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});l.collection.on("backgrid:edited",function(e,t,r){b.setFocusToDebuggerEditor(h.DirectDebug.editor,r)});l.render();h.DirectDebug.local_variables_panel.$container.find(".local_variables").append(l.el)},AddParameters:function e(t){var r=this;if(r.param_grid){r.param_grid.remove();r.param_grid=null}var a=p.Model.extend({defaults:{name:undefined,type:undefined,value:undefined}});var n=r.ParametersCollection=p.Collection.extend({model:a});n.prototype.on("change",r.deposit_parameter_value,r);var i=[{name:"name",label:d("Name"),type:"text",editable:false,cell:"string"},{name:"type",label:d("Type"),type:"text",editable:false,cell:"string"},{name:"value",label:d("Value"),type:"text",cell:"string"}];var s=[];if(t.length!=0){for(var o=0;o<t.length;o++){if(t[o].varclass=="A"){s.push({name:t[o].name,type:t[o].dtype,value:t[o].value})}}}var l=this.param_grid=new g.Grid({emptyText:"No data found",columns:i,collection:new n(s),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});l.collection.on("backgrid:edited",function(e,t,r){b.setFocusToDebuggerEditor(h.DirectDebug.editor,r)});l.render();h.DirectDebug.parameters_panel.$container.find(".parameters").append(l.el)},deposit_parameter_value:function e(t){var r=this;var a=[];a.push({name:t.get("name"),type:t.get("type"),value:t.get("value")});var n=l("debugger.deposit_value",{trans_id:h.DirectDebug.trans_id});u.ajax({url:n,method:"POST",data:{data:JSON.stringify(a)}}).done(function(e){if(e.data.status){r.GetLocalVariables(h.DirectDebug.trans_id);if(e.data.result){f.success(e.data.info,3)}else{f.error(e.data.info,3)}}}).fail(function(){f.alert(d("Debugger Error"),d("Error while depositing variable value."))})},select_frame:function e(){var t=this;var r=l("debugger.select_frame",{trans_id:h.DirectDebug.trans_id,frame_id:t.frame_id});u.ajax({url:r,method:"GET"}).done(function(e){if(e.data.status){h.DirectDebug.editor.setValue(e.data.result[0].src);t.UpdateBreakpoint(h.DirectDebug.trans_id);t.setActiveLine(e.data.result[0].linenumber-2);t.GetLocalVariables(h.DirectDebug.trans_id)}}).fail(function(){f.alert(d("Debugger Error"),d("Error while selecting frame."))})}});var m=p.View.extend({el:".debugger_main_container",initialize:function e(){v.on("pgDebugger:button:state:stop",this.enable_stop,this);v.on("pgDebugger:button:state:step_over",this.enable_step_over,this);v.on("pgDebugger:button:state:step_into",this.enable_step_into,this);v.on("pgDebugger:button:state:continue",this.enable_continue,this);v.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this);v.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function e(t){var r=this.$el.find(".btn-stop");if(t){r.prop("disabled",false);r.removeAttr("disabled")}else{r.prop("disabled",true);r.attr("disabled","disabled")}},enable_step_over:function e(t){var r=this.$el.find(".btn-step-over");if(t){r.prop("disabled",false);r.removeAttr("disabled")}else{r.prop("disabled",true);r.attr("disabled","disabled")}},enable_step_into:function e(t){var r=this.$el.find(".btn-step-into");if(t){r.prop("disabled",false);r.removeAttr("disabled")}else{r.prop("disabled",true);r.attr("disabled","disabled")}},enable_continue:function e(t){var r=this.$el.find(".btn-continue");if(t){r.prop("disabled",false);r.removeAttr("disabled")}else{r.prop("disabled",true);r.attr("disabled","disabled")}},enable_toggle_breakpoint:function e(t){var r=this.$el.find(".btn-toggle-breakpoint");if(t){r.prop("disabled",false);r.removeAttr("disabled")}else{r.prop("disabled",true);r.attr("disabled","disabled")}},enable_clear_all_breakpoints:function e(t){var r=this.$el.find(".btn-clear-breakpoint");if(t){r.prop("disabled",false);r.removeAttr("disabled")}else{r.prop("disabled",true);r.attr("disabled","disabled")}},on_stop:function e(){v.Stop(h.DirectDebug.trans_id)},on_clear_all_breakpoint:function e(){v.clear_all_breakpoint(h.DirectDebug.trans_id)},on_toggle_breakpoint:function e(){v.toggle_breakpoint(h.DirectDebug.trans_id)},on_continue:function e(){v.Continue(h.DirectDebug.trans_id)},on_step_over:function e(){v.Step_over(h.DirectDebug.trans_id)},on_step_into:function e(){v.Step_into(h.DirectDebug.trans_id)},keyAction:function e(t){var r="";r=a.processEventDebugger(this.$el,t,this.preferences,h.DirectDebug.docker);if(!c.isNull(r)&&!c.isUndefined(r)&&r!=""){setTimeout(function(){n.Events.trigger("pgadmin:debugger:".concat(r,":focus"))},100)}}});var r=function e(){};c.extend(r.prototype,{load:function e(t,r,a,n){var i=this;c.bindAll(h.DirectDebug,"messages");if(this.initialized)return;var s;this.initialized=true;this.trans_id=t;this.debug_type=r;this.first_time_indirect_debug=false;this.direct_execution_completed=false;this.polling_timeout_idle=false;this.debug_restarted=false;this.is_user_aborted_debugging=false;this.is_polling_required=true;this.function_name_with_arguments=a;this.layout=n;var o=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;this.preferences=o.get_preferences_for_module("debugger");this.docker=new _("#container",{allowContextMenu:false,allowCollapse:false,loadingClass:"pg-sp-icon",themePath:l("static",{filename:"css"}),theme:"webcabin.overrides.css"});this.panels=[];if(t!=undefined&&!r){s=l("debugger.start_listener",{trans_id:t});u.ajax({url:s,method:"GET"}).done(function(e){if(e.data.status){i.intializePanels();v.enable_toolbar_buttons();v.poll_result(t)}}).fail(function(e){try{var t=JSON.parse(e.responseText);if(t.success==0){f.alert(d("Debugger Error"),t.errormsg)}}catch(e){f.alert(d("Debugger Error"),d("Error while starting debugging listener."))}})}else if(t!=undefined&&r){s=l("debugger.start_listener",{trans_id:t});u.ajax({url:s,method:"GET"}).done(function(e){if(e.data.status){i.messages(t)}}).fail(function(e){try{var t=JSON.parse(e.responseText);if(t.success==0){f.alert(d("Debugger Error"),t.errormsg)}}catch(e){f.alert(d("Debugger Error"),d("Error while starting debugging listener."))}})}else this.intializePanels()},messages:function e(t){var r=this;var a=l("debugger.messages",{trans_id:t});u.ajax({url:a,method:"GET"}).done(function(e){if(e.data.status==="Success"){r.intializePanels();v.enable_toolbar_buttons();v.start_execution(t,e.data.result)}else if(e.data.status==="Busy"){r.messages(t)}else if(e.data.status==="NotConnected"){f.alert(d("Not connected to server or connection with the server has been closed."),e.data.result)}}).fail(function(){f.alert(d("Debugger Error"),d("Error while fetching messages information."))})},onBreakPoint:function e(t,r,a){var n=this;if(a=="breakpoints"&&!h.DirectDebug.polling_timeout_idle){var i=t.lineInfo(r);if(i.gutterMarkers==undefined){v.set_breakpoint(n.trans_id,r+1,1)}else{if(i.gutterMarkers.breakpoints==undefined){v.set_breakpoint(n.trans_id,r+1,1)}else{v.set_breakpoint(n.trans_id,r+1,0)}}var s=i.gutterMarkers;if(s!=undefined&&i.gutterMarkers.breakpoints==undefined)s=i.gutterMarkers.breakpoints;t.setGutterMarker(r,"breakpoints",s?null:function(){var e=document.createElement("div");e.style.color="#822";e.innerHTML="";return e}())}},buildDefaultLayout:function e(t){var r=t.addPanel("code",_.DOCK.TOP);var a=t.addPanel("parameters",_.DOCK.BOTTOM,r);t.addPanel("local_variables",_.DOCK.STACKED,a,{tabOrientation:_.TAB.TOP});t.addPanel("messages",_.DOCK.STACKED,a);t.addPanel("results",_.DOCK.STACKED,a);t.addPanel("stack_pane",_.DOCK.STACKED,a)},intializePanels:function e(){var i=this;this.registerPanel("code",i.function_name_with_arguments,"100%","50%",function(){var e=new s.Browser.Panel({name:"parameters",title:d("Parameters"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'});var t=new s.Browser.Panel({name:"local_variables",title:d("Local variables"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'});var r=new s.Browser.Panel({name:"messages",title:d("Messages"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div id="messages" class="messages" tabindex="0"></div>'});var a=new s.Browser.Panel({name:"results",title:d("Results"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'});var n=new s.Browser.Panel({name:"stack_pane",title:d("Stack"),width:"100%",height:"100%",isCloseable:false,isPrivate:true,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});e.load(i.docker);t.load(i.docker);r.load(i.docker);a.load(i.docker);n.load(i.docker)});n.restore_layout(i.docker,i.layout,this.buildDefaultLayout.bind(this));i.docker.on(_.EVENT.LAYOUT_CHANGED,function(){n.save_current_layout("Debugger/Layout",i.docker)});i.code_editor_panel=i.docker.findPanels("code")[0];i.parameters_panel=i.docker.findPanels("parameters")[0];i.local_variables_panel=i.docker.findPanels("local_variables")[0];i.messages_panel=i.docker.findPanels("messages")[0];i.results_panel=i.docker.findPanels("results")[0];i.stack_pane_panel=i.docker.findPanels("stack_pane")[0];var t=u('<div id="stack_editor_pane" '+'class="pg-panel-content info"></div>');var r=u('<textarea id="debugger-editor-textarea">'+"</textarea>").appendTo(t);i.code_editor_panel.layout().addItem(t);i.editor=o.fromTextArea(r.get(0),{tabindex:-1,lineNumbers:true,foldOptions:{widget:""},foldGutter:true,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:true,extraKeys:s.Browser.editor_shortcut_keys,indentWithTabs:s.Browser.editor_options.indent_with_tabs,indentUnit:s.Browser.editor_options.tabSize,tabSize:s.Browser.editor_options.tabSize,lineWrapping:s.Browser.editor_options.wrapCode,autoCloseBrackets:s.Browser.editor_options.insert_pair_brackets,matchBrackets:s.Browser.editor_options.brace_matching});o.on(i.editor,"keydown",function(e,t){if(t.keyCode==27){document.activeElement.blur()}});n.Events.on("pgadmin:debugger:code:focus",function(){i.editor.focus()});var a=function e(){i.docker.finishLoading(100);i.docker.off(_.EVENT.LOADED);i.editor.on("gutterClick",i.onBreakPoint.bind(i),i);if(i.docker.$container){i.docker.$container.parent().focus()}var r=setInterval(function(){try{var e=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;if(e.preference_version()>0){clearInterval(r);i.reflectPreferences();if(i.preferences.debugger_new_browser_tab){n.bind_beforeunload();var t=setInterval(function(){if(window.opener&&window.opener.pgAdmin){i.reflectPreferences()}else{clearInterval(t)}},1e3)}}}catch(e){clearInterval(r);throw e}},0)};i.docker.startLoading(d("Loading..."));i.docker.on(_.EVENT.LOADED,a);this.toolbarView=new m;u(window).on("keydown",function(e){if(i.toolbarView.keyAction){i.toolbarView.keyAction(e)}});n.onPreferencesChange("debugger",function(){i.reflectPreferences()})},reflectPreferences:function e(){var t=this,r=window.opener?window.opener.pgAdmin.Browser:window.top.pgAdmin.Browser;t.preferences=r.get_preferences_for_module("debugger");t.toolbarView.preferences=t.preferences;t.toolbarView.$el.find("#btn-step-into").attr("title",a.shortcut_accesskey_title("Step into",t.preferences.btn_step_into)).attr("accesskey",a.shortcut_key(t.preferences.btn_step_into));t.toolbarView.$el.find("#btn-step-over").attr("title",a.shortcut_accesskey_title("Step over",t.preferences.btn_step_over)).attr("accesskey",a.shortcut_key(t.preferences.btn_step_over));t.toolbarView.$el.find("#btn-continue").attr("title",a.shortcut_accesskey_title("Continue/Start",t.preferences.btn_start)).attr("accesskey",a.shortcut_key(t.preferences.btn_start));t.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",a.shortcut_accesskey_title("Toggle breakpoint",t.preferences.btn_toggle_breakpoint)).attr("accesskey",a.shortcut_key(t.preferences.btn_toggle_breakpoint));t.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",a.shortcut_accesskey_title("Clear all breakpoints",t.preferences.btn_clear_breakpoints)).attr("accesskey",a.shortcut_key(t.preferences.btn_clear_breakpoints));t.toolbarView.$el.find("#btn-stop").attr("title",a.shortcut_accesskey_title("Stop",t.preferences.btn_stop)).attr("accesskey",a.shortcut_key(t.preferences.btn_stop))},registerPanel:function e(r,a,n,i,s){var o=this;this.docker.registerPanelType(r,{title:a,isPrivate:true,onCreate:function e(t){o.panels[r]=t;t.initSize(n,i);if(!a)t.title(false);else t.title(a);t.closeable(false);t.layout().addItem(u('<div tabindex="0">',{class:"pg-debugger-panel"}));if(s){s.apply(o,[t])}}})}});h.DirectDebug=new r;h.DirectDebug["jquery"]=u;return h.DirectDebug}.apply(t,a),n!==undefined&&(e.exports=n))}])["default"]});